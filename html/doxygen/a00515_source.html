<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.20"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>VREng: src/wo/hairs.cpp Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">VREng
   &#160;<span id="projectnumber">9.1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.20 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('a00515_source.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">hairs.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<a href="a00515.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">//---------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// VREng (Virtual Reality Engine) http://vreng.enst.fr/</span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">// Copyright (C) 1997-2011 Philippe Dax</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// Telecom-ParisTech (Ecole Nationale Superieure des Telecommunications)</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// VREng is a free software; you can redistribute it and/or modify it</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// under the terms of the GNU General Public Licence as published by</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// the Free Software Foundation; either version 2, or (at your option)</span></div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">// any later version.</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">// VREng is distributed in the hope that it will be useful, but</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">// WITHOUT ANY WARRANTY; without even the implied warranty of</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">// GNU General Public License for more details.</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment">//</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">// You should have received a copy of the GNU General Public License</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">// along with this program; if not, write to the Free Software</span></div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">// Foundation, Inc., 59 Temple Place - Suite 330, Boston, MA 02111-1307, USA.</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="comment">//---------------------------------------------------------------------------</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a00143.html">vreng.hpp</a>&quot;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a00518.html">hairs.hpp</a>&quot;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a00113.html">timer.hpp</a>&quot;</span>    <span class="comment">// fTime, delta</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a00038.html">http.hpp</a>&quot;</span> <span class="comment">// Http</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a00005.html">cache.hpp</a>&quot;</span>  <span class="comment">// openCache</span></div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a00026.html">file.hpp</a>&quot;</span> <span class="comment">// closeFile</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="a01178.html">lwo.hpp</a>&quot;</span>  <span class="comment">// Lwo</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160; </div>
<div class="line"><a name="l00029"></a><span class="lineno"><a class="line" href="a00515.html#a106ebc4b822f29d77873b4b2b1b9617e">   29</a></span>&#160;<span class="keyword">static</span> <a class="code" href="a01812.html">Hairs</a> *<a class="code" href="a00515.html#a106ebc4b822f29d77873b4b2b1b9617e">hairs</a> = NULL;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160; </div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160; </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="keyword">const</span> <a class="code" href="a01892.html">OClass</a> <a class="code" href="a01812.html#a9d5973ddab5af02f9598bc9e4307efa3">Hairs::oclass</a>(<a class="code" href="a00518.html#acf00dd36081957995cbe8d0d57e06708">HAIRS_TYPE</a>, <span class="stringliteral">&quot;Hairs&quot;</span>, <a class="code" href="a01812.html#a68ccd4796e6d3da12282fa70d5a5defa">Hairs::creator</a>);</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160; </div>
<div class="line"><a name="l00034"></a><span class="lineno"><a class="line" href="a01812.html#a5722735b7c37cbfc0560ef956433acaa">   34</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01812.html#a5722735b7c37cbfc0560ef956433acaa">Hairs::funcs</a>() {}</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160; </div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="comment">/* creation from a file */</span></div>
<div class="line"><a name="l00037"></a><span class="lineno"><a class="line" href="a01812.html#a68ccd4796e6d3da12282fa70d5a5defa">   37</a></span>&#160;<a class="code" href="a02108.html">WObject</a> * <a class="code" href="a01812.html#a68ccd4796e6d3da12282fa70d5a5defa">Hairs::creator</a>(<span class="keywordtype">char</span> *l)</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;{</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">new</span> <a class="code" href="a01812.html#a2fab513a8f2de48bb69cb11ef3ac50aa">Hairs</a>(l);</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;}</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160; </div>
<div class="line"><a name="l00042"></a><span class="lineno"><a class="line" href="a01812.html#a0ed9495296fd509dd92b168f3d4fca48">   42</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01812.html#a0ed9495296fd509dd92b168f3d4fca48">Hairs::defaults</a>()</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;{</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;  <a class="code" href="a01812.html#ab412763f59de9db113b223bab9299195">affobj</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;  <a class="code" href="a01812.html#a087fff004e9f9b8774dea37566bb4e61">objchanged</a> = <span class="keyword">true</span>; <span class="comment">// rebuild list</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;  <a class="code" href="a01812.html#a32f96585f466c7e46ef4cbcf4572920e">angle</a> = 150.;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;  <a class="code" href="a01812.html#a382a2fb6ad5fed12522fe5585cc27dd0">scale</a> = 1;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;}</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160; </div>
<div class="line"><a name="l00050"></a><span class="lineno"><a class="line" href="a01812.html#a0e44e957e9a1cc4176b99c294d457693">   50</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01812.html#a0e44e957e9a1cc4176b99c294d457693">Hairs::parser</a>(<span class="keywordtype">char</span> *l)</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;{</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;  <a class="code" href="a01812.html#a0ed9495296fd509dd92b168f3d4fca48">defaults</a>();</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;  l = <a class="code" href="a02108.html#ab3dad0ae5630e692c0eaac557df598d0">tokenize</a>(l);</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;  <a class="code" href="a00638.html#a375cf0543a2d6b2a1f9745608c8ead2c">begin_while_parse</a>(l) {</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;    l = <a class="code" href="a02108.html#ae3a41c24e16343f3dbc926da1ac3f106">parse</a>()-&gt;<a class="code" href="a01900.html#a2488922ccb36a6e227ae454d9d9b2a0c">parseAttributes</a>(l, <span class="keyword">this</span>);</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;    <span class="keywordflow">if</span> (!l) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;    <span class="keywordflow">if</span>      (!<a class="code" href="a00176.html#af4abc8b6ec5c091297406f51429abbde">stringcmp</a>(l, <span class="stringliteral">&quot;url=&quot;</span>)) l = <a class="code" href="a02108.html#ae3a41c24e16343f3dbc926da1ac3f106">parse</a>()-&gt;<a class="code" href="a01900.html#a74cbc343311c02531a7e39f38865841b">parseUrl</a>(l, <a class="code" href="a02108.html#ab6046635b34c0784c97b8e734dbe99dd">names</a>.<a class="code" href="a02096.html#a73932a7bf32fcb6b0550faa3197acc22">url</a>);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!<a class="code" href="a00176.html#af4abc8b6ec5c091297406f51429abbde">stringcmp</a>(l, <span class="stringliteral">&quot;scale=&quot;</span>)) l = <a class="code" href="a02108.html#ae3a41c24e16343f3dbc926da1ac3f106">parse</a>()-&gt;<a class="code" href="a01900.html#ad334680b0147887f5117ac586aa8cce8">parseFloat</a>(l, &amp;<a class="code" href="a01812.html#a382a2fb6ad5fed12522fe5585cc27dd0">scale</a>, <span class="stringliteral">&quot;scale&quot;</span>);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  }</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  <a class="code" href="a00638.html#a07ef5da7baefb995252bba9a24326832">end_while_parse</a>(l);</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;}</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160; </div>
<div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="a01812.html#a2fab513a8f2de48bb69cb11ef3ac50aa">   63</a></span>&#160;<a class="code" href="a01812.html#a2fab513a8f2de48bb69cb11ef3ac50aa">Hairs::Hairs</a>(<span class="keywordtype">char</span> *l)</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  <a class="code" href="a00515.html#a106ebc4b822f29d77873b4b2b1b9617e">hairs</a> = <span class="keyword">this</span>;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  <a class="code" href="a01812.html#a1d7fff5a831c62f495f80202ce487b71">hair</a> = <span class="keyword">new</span> <a class="code" href="a01808.html">Hair</a>();</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  <a class="code" href="a01812.html#a0e44e957e9a1cc4176b99c294d457693">parser</a>(l);</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  <a class="code" href="a02108.html#ab69de269d7512c2fcad2f34d3160442d">enableBehavior</a>(<a class="code" href="a00866.html#a2a11c2c2bd54baf5dbc068baff05ef01">NO_ELEMENTARY_MOVE</a>);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  <a class="code" href="a02108.html#ab69de269d7512c2fcad2f34d3160442d">enableBehavior</a>(<a class="code" href="a00866.html#a13395521c80d491897720252244cd753">COLLIDE_NEVER</a>);</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  <a class="code" href="a02108.html#ab69de269d7512c2fcad2f34d3160442d">enableBehavior</a>(<a class="code" href="a00866.html#a96d00b8d15c7c194d97ce2adb930010a">SPECIFIC_RENDER</a>);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  <a class="code" href="a02108.html#ab69de269d7512c2fcad2f34d3160442d">enableBehavior</a>(<a class="code" href="a00866.html#a56ae4029eeabd22924990842aa7995ad">UNSELECTABLE</a>);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  <a class="code" href="a02108.html#a67b7b4a6f2b5d87e8d04fde44f483abf">setRenderPrior</a>(<a class="code" href="a02108.html#a0bbccb546fc10f1f5d5ad606f8ab1feca63421033bcb770b36205db40d4cdf507">RENDER_HIGH</a>);</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160; </div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  <a class="code" href="a02108.html#a531b1401e6632568550a231210d24ba9">initializeMobileObject</a>(0);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <a class="code" href="a02108.html#a1e11950ab74f28010f4e1d7d371b2750">enablePermanentMovement</a>();</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160; </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01812.html#ad42eda83f3be67e2d10593e841951460">loader</a>(<a class="code" href="a02108.html#ab6046635b34c0784c97b8e734dbe99dd">names</a>.<a class="code" href="a02096.html#a73932a7bf32fcb6b0550faa3197acc22">url</a>, <a class="code" href="a01812.html#a382a2fb6ad5fed12522fe5585cc27dd0">scale</a>))   <span class="comment">// load model</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <a class="code" href="a01812.html#a6ac41644982ec9a136dbd84d37e3e5ca">dlist</a> = glGenLists(1);</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  <span class="keywordflow">else</span> <a class="code" href="a00041.html#abd34ebec1a69975cf961f9a888d94d26">trace</a>(<a class="code" href="a00044.html#a34617f3ac0249ca877bddc57f6982401">DBG_MOD</a>, <span class="stringliteral">&quot;%s not well loaded&quot;</span>, <a class="code" href="a02108.html#ab6046635b34c0784c97b8e734dbe99dd">names</a>.<a class="code" href="a02096.html#a73932a7bf32fcb6b0550faa3197acc22">url</a>);</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;}</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160; </div>
<div class="line"><a name="l00083"></a><span class="lineno"><a class="line" href="a01812.html#ad42eda83f3be67e2d10593e841951460">   83</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="a01812.html#ad42eda83f3be67e2d10593e841951460">Hairs::loader</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *url, <span class="keywordtype">float</span> scale)</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;{</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;<span class="preprocessor">#if 0 //dax use Lwo</span></div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  <a class="code" href="a01812.html#ae0a53ae4a61a95bf8f2d21c59a9fd117">obj</a> = <span class="keyword">new</span> <a class="code" href="a02604.html">Lwo</a>(url);</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;  <a class="code" href="a01812.html#ae0a53ae4a61a95bf8f2d21c59a9fd117">obj</a> = <span class="keyword">new</span> <a class="code" href="a01796.html">Object</a>();</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="a01812.html#ae0a53ae4a61a95bf8f2d21c59a9fd117">obj</a>-&gt;<a class="code" href="a01796.html#a8082d05379c1b91bc5d6b014e54049ba">scal</a> = <a class="code" href="a01812.html#a382a2fb6ad5fed12522fe5585cc27dd0">scale</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <a class="code" href="a01424.html#a2377f200b0ea62979bcd36362f7eaff3">Http::httpOpen</a>(url, <a class="code" href="a01812.html#ad67b5276fb5a3d62e4df324999e7554c">httpReader</a>, <a class="code" href="a01812.html#ae0a53ae4a61a95bf8f2d21c59a9fd117">obj</a>, 0);  <span class="comment">// get model</span></div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160; </div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  <a class="code" href="a01792.html">Surface</a> *s_hair = <a class="code" href="a01812.html#ae0a53ae4a61a95bf8f2d21c59a9fd117">obj</a>-&gt;<a class="code" href="a01796.html#ae8a9c090c17fb126e730031d18d4ea67">findSurface</a>(<span class="stringliteral">&quot;hair&quot;</span>);</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordflow">if</span> (s_hair == NULL) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;no surface hair&quot;</span>); <span class="keywordflow">return</span> <span class="keyword">false</span>; }</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;  <a class="code" href="a01812.html#a1d7fff5a831c62f495f80202ce487b71">hair</a>-&gt;<a class="code" href="a01808.html#a8291f0a200a7273098327fe0c28ae2af">init</a>(<a class="code" href="a01812.html#ae0a53ae4a61a95bf8f2d21c59a9fd117">obj</a>, s_hair, <a class="code" href="a01812.html#a382a2fb6ad5fed12522fe5585cc27dd0">scale</a>);</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <a class="code" href="a01792.html">Surface</a> *s_skin = <a class="code" href="a01812.html#ae0a53ae4a61a95bf8f2d21c59a9fd117">obj</a>-&gt;<a class="code" href="a01796.html#ae8a9c090c17fb126e730031d18d4ea67">findSurface</a>(<span class="stringliteral">&quot;hair&quot;</span>);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;  <span class="keywordflow">if</span> (s_skin != NULL) *(<a class="code" href="a01784.html">Material</a>*)s_hair = *(<a class="code" href="a01784.html">Material</a>*)s_skin;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordflow">if</span> (s_skin) <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">false</span>;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;}</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160; </div>
<div class="line"><a name="l00102"></a><span class="lineno"><a class="line" href="a01808.html#a8291f0a200a7273098327fe0c28ae2af">  102</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01808.html#a8291f0a200a7273098327fe0c28ae2af">Hair::init</a>(<a class="code" href="a01796.html">Object</a> *_o, <a class="code" href="a01792.html">Surface</a> *_s, <span class="keywordtype">float</span> scale)</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;{</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <a class="code" href="a01808.html#ade1756da0b198dcf77e55f9bfe72349e">o</a> = _o;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <a class="code" href="a01808.html#a2587b07c48f3aaabc64d0d2beb881f97">s</a> = _s;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <a class="code" href="a01808.html#a15f9f8a6181ee87be70512fb9ba99cab">m</a> = *<a class="code" href="a01808.html#a2587b07c48f3aaabc64d0d2beb881f97">s</a>;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;  <a class="code" href="a01808.html#a15f9f8a6181ee87be70512fb9ba99cab">m</a>.<a class="code" href="a01784.html#a4dc22dce3e39672876a6634af6dbd114">flag</a> &amp;= ~<a class="code" href="a01784.html">Material</a>::Lighting;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="a00518.html#a4c89e2864261ce498edaeb99be49f754">NBHAIR</a> ; i++) {</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;    <span class="keywordtype">int</span> f = rand() % <a class="code" href="a01808.html#a2587b07c48f3aaabc64d0d2beb881f97">s</a>-&gt;<a class="code" href="a01792.html#a52f45d05b60ad64ef135fc5853f04405">nbf</a>;</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;    <a class="code" href="a01788.html">TriFace</a> *fc = <a class="code" href="a01808.html#a2587b07c48f3aaabc64d0d2beb881f97">s</a>-&gt;<a class="code" href="a01792.html#ac40c3916e0257ea51763f92394d705ee">fc</a> + f;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;    <span class="keywordtype">float</span> a = <a class="code" href="a00518.html#a5c1a231e208926858fefae841e160853">rnd</a>(1.);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;    <span class="keywordtype">float</span> b = <a class="code" href="a00518.html#a5c1a231e208926858fefae841e160853">rnd</a>(1.);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;    <span class="keywordflow">if</span> (a+b &gt; 1) {</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;      a = 1 - a;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;      b = 1 - b;</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;    }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;    <a class="code" href="a01484.html">Vector3</a> posh = fc-&gt;<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[0]-&gt;<a class="code" href="a01780.html#a2670328f4966d09ceb0f4d434d1d9666">p</a> + a*(fc-&gt;<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[1]-&gt;<a class="code" href="a01780.html#a2670328f4966d09ceb0f4d434d1d9666">p</a> - fc-&gt;<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[0]-&gt;<a class="code" href="a01780.html#a2670328f4966d09ceb0f4d434d1d9666">p</a>) + b*(fc-&gt;<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[2]-&gt;<a class="code" href="a01780.html#a2670328f4966d09ceb0f4d434d1d9666">p</a> - fc-&gt;<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[0]-&gt;<a class="code" href="a01780.html#a2670328f4966d09ceb0f4d434d1d9666">p</a>);</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="comment">/*</span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="comment">    posh.x *= scale;</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="comment">    posh.y *= scale;</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="comment">    posh.z *= scale;</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="comment">*/</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <a class="code" href="a01484.html">Vector3</a> dir = fc-&gt;<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[0]-&gt;<a class="code" href="a01780.html#ae69f381d18fda8724b50c2c96c7f4b76">n</a> + a*(fc-&gt;<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[1]-&gt;<a class="code" href="a01780.html#ae69f381d18fda8724b50c2c96c7f4b76">n</a> - fc-&gt;<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[0]-&gt;<a class="code" href="a01780.html#ae69f381d18fda8724b50c2c96c7f4b76">n</a>) + b*(fc-&gt;<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[2]-&gt;<a class="code" href="a01780.html#ae69f381d18fda8724b50c2c96c7f4b76">n</a> - fc-&gt;<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[0]-&gt;<a class="code" href="a01780.html#ae69f381d18fda8724b50c2c96c7f4b76">n</a>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;    <span class="comment">//O dir.Scale(HAIRLENGTH / dir.len());</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;    dir.<a class="code" href="a01484.html#a76760a5a3269745e146c059ef444f42f">scale</a>(0.1);</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;    <span class="comment">//error(&quot;init: f=%d a,b %.2f,%.2f sc=%.3f posh=%.2f %.2f %.2f&quot;,f,a,b,HAIRLENGTH/dir.len(),posh.x,posh.y,posh.z);</span></div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    <a class="code" href="a01808.html#a0211ac0e296dfb31905d73900f2804e0">ln</a>[i].<a class="code" href="a01804.html#a29abe137f505028304f14da8a1beac79">init</a>(posh, dir);</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;  }</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160; </div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <a class="code" href="a01768.html">Color4f</a> col = <a class="code" href="a01808.html#a15f9f8a6181ee87be70512fb9ba99cab">m</a>.<a class="code" href="a01784.html#ab390672879ce114b6de6aba246a31392">diffuse</a>;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="a00518.html#adeaa69e65cde37c77d5400eaadd204d8">HAIRNCOLOR</a> ; i++)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;    <a class="code" href="a01808.html#a2a2e130ecabc68b7cc08fcd0e7125823">c</a>[i] = col*((i+<a class="code" href="a00518.html#adeaa69e65cde37c77d5400eaadd204d8">HAIRNCOLOR</a>/2)*1./<a class="code" href="a00518.html#adeaa69e65cde37c77d5400eaadd204d8">HAIRNCOLOR</a>);</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160; </div>
<div class="line"><a name="l00135"></a><span class="lineno"><a class="line" href="a01804.html#a29abe137f505028304f14da8a1beac79">  135</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01804.html#a29abe137f505028304f14da8a1beac79">Line::init</a>(<a class="code" href="a01484.html">Vector3</a> p0, <a class="code" href="a01484.html">Vector3</a> dp)</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;{</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;  <a class="code" href="a01804.html#a58e1b8f21b8ff1c5542aa8f853b2eff5">n</a> = dp;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <a class="code" href="a01804.html#a58e1b8f21b8ff1c5542aa8f853b2eff5">n</a>.<a class="code" href="a01484.html#a7cc926b7607a92ead837d3d0cfc7a46f">normalize</a>();</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  p0 -= dp;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i=0; i&lt;<a class="code" href="a00518.html#a93dc7578e99d1c96c69b89f0ae2a2d42">HAIRSIZE</a> ; i++) {</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <a class="code" href="a01804.html#a0ca202cd13b78fadae5e473df1fbc471">pt</a>[i].<a class="code" href="a01800.html#aa1c2f1c6695d5088e1c80c4a5ecacd26">p</a> = p0;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;    p0 += dp;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;    dp.<a class="code" href="a01484.html#a7e2d3237b29a2f29d7b3d8b2934e35f2">x</a> += <a class="code" href="a00518.html#a5c1a231e208926858fefae841e160853">rnd</a>(2.*1)-1;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;    dp.<a class="code" href="a01484.html#a86eb35a9fa2d5a49e7fad66a35fa9c13">y</a> += <a class="code" href="a00518.html#a5c1a231e208926858fefae841e160853">rnd</a>(2.*1)-1;</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;    dp.<a class="code" href="a01484.html#aa8c9461eb24bd2c364258078811a3e9d">z</a> += <a class="code" href="a00518.html#a5c1a231e208926858fefae841e160853">rnd</a>(2.*1)-1;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;    <span class="comment">//D error(&quot;dp: %d %.2f %.2f %.2f&quot;, i,dp.x,dp.y,dp.z);</span></div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">#if 0 //DAX</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    dp.<a class="code" href="a01484.html#a7e2d3237b29a2f29d7b3d8b2934e35f2">x</a> *= 0.0028;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;    dp.<a class="code" href="a01484.html#a86eb35a9fa2d5a49e7fad66a35fa9c13">y</a> *= 0.0028;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;    dp.<a class="code" href="a01484.html#aa8c9461eb24bd2c364258078811a3e9d">z</a> *= 0.0028;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  }</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;}</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno"><a class="line" href="a01800.html#a5c3e83cf1c407633e4193b3493fd2b14">  155</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01800.html#a5c3e83cf1c407633e4193b3493fd2b14">Node::put</a>(<span class="keywordtype">int</span> pdata)</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;{</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  glVertex3f(<a class="code" href="a01800.html#aa1c2f1c6695d5088e1c80c4a5ecacd26">p</a>.<a class="code" href="a01484.html#a7e2d3237b29a2f29d7b3d8b2934e35f2">x</a>, <a class="code" href="a01800.html#aa1c2f1c6695d5088e1c80c4a5ecacd26">p</a>.<a class="code" href="a01484.html#a86eb35a9fa2d5a49e7fad66a35fa9c13">y</a>, <a class="code" href="a01800.html#aa1c2f1c6695d5088e1c80c4a5ecacd26">p</a>.<a class="code" href="a01484.html#aa8c9461eb24bd2c364258078811a3e9d">z</a>);</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  <span class="comment">//error(&quot;p: %d %.2f %.2f %.2f&quot;, pdata, p.x,p.y,p.z);</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;}</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160; </div>
<div class="line"><a name="l00161"></a><span class="lineno"><a class="line" href="a01804.html#ae07a4cb9f3369c39b46170927d887763">  161</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01804.html#ae07a4cb9f3369c39b46170927d887763">Line::draw</a>(<span class="keywordtype">int</span> pdata)</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;{</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  <a class="code" href="a01800.html">Node</a> *p = <a class="code" href="a01804.html#a0ca202cd13b78fadae5e473df1fbc471">pt</a> + 1;</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160; </div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;<span class="preprocessor">#if 0 //DAX</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  glBegin(GL_LINE_STRIP);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> <a class="code" href="a01804.html#a58e1b8f21b8ff1c5542aa8f853b2eff5">n</a> = <a class="code" href="a00518.html#a93dc7578e99d1c96c69b89f0ae2a2d42">HAIRSIZE</a>-1; <a class="code" href="a01804.html#a58e1b8f21b8ff1c5542aa8f853b2eff5">n</a>; <a class="code" href="a01804.html#a58e1b8f21b8ff1c5542aa8f853b2eff5">n</a>--) {</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    p-&gt;<a class="code" href="a01800.html#a5c3e83cf1c407633e4193b3493fd2b14">put</a>(pdata);</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    p++;</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  glEnd();</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="keywordtype">int</span> <a class="code" href="a01804.html#a58e1b8f21b8ff1c5542aa8f853b2eff5">n</a> = <a class="code" href="a00518.html#a93dc7578e99d1c96c69b89f0ae2a2d42">HAIRSIZE</a>-1;</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  glInterleavedArrays(GL_V3F, <span class="keyword">sizeof</span>(<a class="code" href="a01800.html">Node</a>), p);</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  glDrawArrays(GL_LINE_STRIP, 0, <a class="code" href="a01804.html#a58e1b8f21b8ff1c5542aa8f853b2eff5">n</a>);</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;}</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160; </div>
<div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="a01808.html#ace5e2d8c5f8b4c3a009b3e99dfe277d9">  179</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01808.html#ace5e2d8c5f8b4c3a009b3e99dfe277d9">Hair::draw</a>()</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;{</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  <span class="keywordtype">int</span> pdata = <a class="code" href="a01808.html#a15f9f8a6181ee87be70512fb9ba99cab">m</a>.<a class="code" href="a01784.html#aa737a7723c9b82c3ac72d80062bb8271">put</a>();</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <a class="code" href="a01804.html">Line</a> *l = <a class="code" href="a01808.html#a0211ac0e296dfb31905d73900f2804e0">ln</a>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160; </div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> n=0; n &lt; <a class="code" href="a00518.html#a4c89e2864261ce498edaeb99be49f754">NBHAIR</a> ; n++)  {</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;<span class="preprocessor">#if 1 //TEST</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    glMaterialfv(GL_FRONT_AND_BACK, GL_DIFFUSE, <a class="code" href="a01808.html#a2a2e130ecabc68b7cc08fcd0e7125823">c</a>[((n-1)*<a class="code" href="a00518.html#adeaa69e65cde37c77d5400eaadd204d8">HAIRNCOLOR</a>)/<a class="code" href="a00518.html#a4c89e2864261ce498edaeb99be49f754">NBHAIR</a>].t);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;<span class="preprocessor">#else</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    glColor4fv(<a class="code" href="a01808.html#a2a2e130ecabc68b7cc08fcd0e7125823">c</a>[((n-1)*<a class="code" href="a00518.html#adeaa69e65cde37c77d5400eaadd204d8">HAIRNCOLOR</a>)/<a class="code" href="a00518.html#a4c89e2864261ce498edaeb99be49f754">NBHAIR</a>].t);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="preprocessor">#endif</span></div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    l-&gt;<a class="code" href="a01804.html#ae07a4cb9f3369c39b46170927d887763">draw</a>(pdata); <span class="comment">// draw line</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    l++;</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  }</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160; </div>
<div class="line"><a name="l00195"></a><span class="lineno"><a class="line" href="a01808.html#a542135d307b94e1cff88241b573d1571">  195</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01808.html#a542135d307b94e1cff88241b573d1571">Hair::animate</a>(<span class="keywordtype">float</span> dt, <a class="code" href="a01484.html">Vector3</a> depl)</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;{</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <a class="code" href="a01484.html">Vector3</a> v, v2;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="keywordtype">float</span> l, f1, f2;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <a class="code" href="a01804.html">Line</a> *pl = <a class="code" href="a01808.html#a0211ac0e296dfb31905d73900f2804e0">ln</a>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="keywordtype">int</span> i = <a class="code" href="a00518.html#a4c89e2864261ce498edaeb99be49f754">NBHAIR</a>;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160; </div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="keywordtype">int</span> p = <a class="code" href="a00518.html#a93dc7578e99d1c96c69b89f0ae2a2d42">HAIRSIZE</a> - 2;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    <a class="code" href="a01800.html">Node</a> *pp = pl-&gt;<a class="code" href="a01804.html#a0ca202cd13b78fadae5e473df1fbc471">pt</a> + 2;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;      pp-&gt;<a class="code" href="a01800.html#aa1c2f1c6695d5088e1c80c4a5ecacd26">p</a> += depl;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;      v = pp[-1].<a class="code" href="a01800.html#aa1c2f1c6695d5088e1c80c4a5ecacd26">p</a> - pp[0].<a class="code" href="a01800.html#aa1c2f1c6695d5088e1c80c4a5ecacd26">p</a>;</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      l = v.<a class="code" href="a01484.html#abab0747838189d9a41f37fdcafa9fce0">length2</a>();</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;      <span class="keywordflow">if</span> (l &gt; <a class="code" href="a00518.html#ac4041a19ac1fddefc2239437baecd8f5">MAXL</a>) {</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;        v *= (1 - <a class="code" href="a00518.html#ab5e777563bbcf543fe91be06b4ccf215">MAXL2</a> / (float)sqrt(l));</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;        pp-&gt;<a class="code" href="a01800.html#aa1c2f1c6695d5088e1c80c4a5ecacd26">p</a> += v;</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;        pp-&gt;<a class="code" href="a01800.html#a929e69ba993d5d970369d10b194fa162">v</a> *= 1 - <a class="code" href="a00518.html#a10928b19b03ed9d99049815355bb20a5">FROT</a>;</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;      }</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;      <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        f1 = <a class="code" href="a00518.html#a75a05dc6db649fc00b00ecb7e06b7366">STIFFNESS</a> * (1 - (<a class="code" href="a00518.html#a4f436de546f6e269715adff96ec34d82">HAIRLENGTH</a> * <a class="code" href="a00518.html#a4f436de546f6e269715adff96ec34d82">HAIRLENGTH</a>) / l);</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;        v2 = pp[-2].<a class="code" href="a01800.html#aa1c2f1c6695d5088e1c80c4a5ecacd26">p</a> - pp[0].<a class="code" href="a01800.html#aa1c2f1c6695d5088e1c80c4a5ecacd26">p</a>;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        l = v2.<a class="code" href="a01484.html#abab0747838189d9a41f37fdcafa9fce0">length2</a>();</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;        f2 = 0.4 * <a class="code" href="a00518.html#aab06a62de95a73a4511861a167d93313">STIFF2</a> * (1 - (<a class="code" href="a00518.html#abea75653d21f6d50d82ad16632b7d0c0">LENGTH2</a> * <a class="code" href="a00518.html#abea75653d21f6d50d82ad16632b7d0c0">LENGTH2</a>) / l);</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;        pp-&gt;<a class="code" href="a01800.html#a929e69ba993d5d970369d10b194fa162">v</a> = pp-&gt;<a class="code" href="a01800.html#a929e69ba993d5d970369d10b194fa162">v</a> * (1 - <a class="code" href="a00518.html#a10928b19b03ed9d99049815355bb20a5">FROT</a>) + v*f1 + v2*f2; <span class="comment">//+GForce;</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;      }</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;      pp-&gt;<a class="code" href="a01800.html#a929e69ba993d5d970369d10b194fa162">v</a>.<a class="code" href="a01484.html#aa8c9461eb24bd2c364258078811a3e9d">z</a> += <a class="code" href="a00518.html#a02a3534250726e0cd83c7bc111677886">HAIRGRAVITY</a>;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;      ++pp;</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    } <span class="keywordflow">while</span> (--p);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160; </div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;    p = <a class="code" href="a00518.html#a93dc7578e99d1c96c69b89f0ae2a2d42">HAIRSIZE</a> - 2;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    pp = pl-&gt;<a class="code" href="a01804.html#a0ca202cd13b78fadae5e473df1fbc471">pt</a> + 2;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">do</span> {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;      pp-&gt;<a class="code" href="a01800.html#aa1c2f1c6695d5088e1c80c4a5ecacd26">p</a> += pp-&gt;<a class="code" href="a01800.html#a929e69ba993d5d970369d10b194fa162">v</a>;</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      ++pp;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    } <span class="keywordflow">while</span> (--p);</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    pl++;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  } <span class="keywordflow">while</span> (--i);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;}</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160; </div>
<div class="line"><a name="l00235"></a><span class="lineno"><a class="line" href="a01812.html#a641c296daf1c1cd7349d738f526c73c1">  235</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01812.html#a641c296daf1c1cd7349d738f526c73c1">Hairs::render</a>()</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;{</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  <span class="keyword">static</span> uint32_t nf = 0;</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160; </div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="comment">//DAX glPushAttrib(GL_ALL_ATTRIB_BITS);</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  glPushMatrix();</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160; </div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  glDisable(GL_CULL_FACE);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  glDisable(GL_DEPTH_TEST);</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  glCullFace(GL_BACK); <span class="comment">// reject fliped faces</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;  glDepthFunc(GL_LESS);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  glEnable(GL_BLEND);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  GLfloat light2[4] = {0,0,1,0};</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  glEnable(GL_NORMALIZE);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  <span class="comment">//DAX glTranslatef(0, 0, -OBJSIZE/2);</span></div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;  <span class="comment">//glPushMatrix();</span></div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;  glLightfv(GL_LIGHT2, GL_POSITION, light2); <span class="comment">// light position</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;  glEnable(GL_LIGHT2);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;  <span class="comment">//glPopMatrix();</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;  glRotatef(90, 1, 0, 0);</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  glPushMatrix();</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;   glRotatef(<a class="code" href="a01812.html#a32f96585f466c7e46ef4cbcf4572920e">angle</a>, 0, 0, 1);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   <span class="comment">//error(&quot;%.2f %.2f %.2f&quot;, pos.x+posh.x, pos.y+posh.y, pos.z+posh.z);</span></div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;   glTranslatef(<a class="code" href="a02108.html#a5a950d20f18c8bf95fcfc1eda8025256">pos</a>.<a class="code" href="a02100.html#a0f67acb27addc553b7feb65c13bcda33">x</a>+<a class="code" href="a01812.html#a0cec7a7aa012b6583b98f9464f72f318">posh</a>.<a class="code" href="a01484.html#a7e2d3237b29a2f29d7b3d8b2934e35f2">x</a>, <a class="code" href="a02108.html#a5a950d20f18c8bf95fcfc1eda8025256">pos</a>.<a class="code" href="a02100.html#ac2a61910f8f8882cf29aaceb05b2a776">y</a>+<a class="code" href="a01812.html#a0cec7a7aa012b6583b98f9464f72f318">posh</a>.<a class="code" href="a01484.html#a86eb35a9fa2d5a49e7fad66a35fa9c13">y</a>, <a class="code" href="a02108.html#a5a950d20f18c8bf95fcfc1eda8025256">pos</a>.<a class="code" href="a02100.html#a324bca33a4f315ca6ddabd8c83362d62">z</a>+<a class="code" href="a01812.html#a0cec7a7aa012b6583b98f9464f72f318">posh</a>.<a class="code" href="a01484.html#aa8c9461eb24bd2c364258078811a3e9d">z</a>);</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="a01812.html#ab412763f59de9db113b223bab9299195">affobj</a>) {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;     <span class="keywordflow">if</span> (<a class="code" href="a01812.html#a087fff004e9f9b8774dea37566bb4e61">objchanged</a>) {  <span class="comment">// rebuild list</span></div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;       glNewList(<a class="code" href="a01812.html#a6ac41644982ec9a136dbd84d37e3e5ca">dlist</a>, GL_COMPILE_AND_EXECUTE);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;       <a class="code" href="a01812.html#ae0a53ae4a61a95bf8f2d21c59a9fd117">obj</a>-&gt;<a class="code" href="a01796.html#a821f5b25b450fa1acdb3f9c0b5962592">draw</a>();</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;       glEndList();</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;       <a class="code" href="a01812.html#a087fff004e9f9b8774dea37566bb4e61">objchanged</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;     }</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;     <span class="keywordflow">else</span> glCallList(<a class="code" href="a01812.html#a6ac41644982ec9a136dbd84d37e3e5ca">dlist</a>);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;   }</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;   <a class="code" href="a01812.html#a1d7fff5a831c62f495f80202ce487b71">hair</a>-&gt;<a class="code" href="a01808.html#ace5e2d8c5f8b4c3a009b3e99dfe277d9">draw</a>();</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;   glDisable(GL_LIGHT2);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;  glPopMatrix();</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;  glDisable(GL_BLEND);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;  glEnable(GL_DEPTH_TEST);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;  glEnable(GL_CULL_FACE);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;  glPopMatrix();</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;  <span class="comment">//DAX glPopAttrib();</span></div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;  nf++;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;}</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160; </div>
<div class="line"><a name="l00279"></a><span class="lineno"><a class="line" href="a01812.html#a8a6b834a28be1f99cf054a5576b7c019">  279</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01812.html#a8a6b834a28be1f99cf054a5576b7c019">Hairs::changePermanent</a>(<span class="keywordtype">float</span> dt)</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;{</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;  <span class="keyword">static</span> <span class="keywordtype">bool</span> <a class="code" href="a00827.html#a77e49fc0956d412a05337460c7778c6d">first</a> = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160; </div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a00827.html#a77e49fc0956d412a05337460c7778c6d">first</a>) {</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;    <a class="code" href="a00827.html#a77e49fc0956d412a05337460c7778c6d">first</a> = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;    <a class="code" href="a01812.html#a85d838982d4ceb7b1b130df44de63e4e">pos0</a>.<a class="code" href="a01484.html#a7e2d3237b29a2f29d7b3d8b2934e35f2">x</a> *= <a class="code" href="a01812.html#a382a2fb6ad5fed12522fe5585cc27dd0">scale</a>; <a class="code" href="a01812.html#a85d838982d4ceb7b1b130df44de63e4e">pos0</a>.<a class="code" href="a01484.html#a86eb35a9fa2d5a49e7fad66a35fa9c13">y</a> *= <a class="code" href="a01812.html#a382a2fb6ad5fed12522fe5585cc27dd0">scale</a>; <a class="code" href="a01812.html#a85d838982d4ceb7b1b130df44de63e4e">pos0</a>.<a class="code" href="a01484.html#aa8c9461eb24bd2c364258078811a3e9d">z</a> *= <a class="code" href="a01812.html#a382a2fb6ad5fed12522fe5585cc27dd0">scale</a>;</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;    <a class="code" href="a01812.html#a354edee99358ddac9ba8e1fb3f4bb453">pos1</a>.<a class="code" href="a01484.html#a7e2d3237b29a2f29d7b3d8b2934e35f2">x</a> *= <a class="code" href="a01812.html#a382a2fb6ad5fed12522fe5585cc27dd0">scale</a>; <a class="code" href="a01812.html#a354edee99358ddac9ba8e1fb3f4bb453">pos1</a>.<a class="code" href="a01484.html#a86eb35a9fa2d5a49e7fad66a35fa9c13">y</a> *= <a class="code" href="a01812.html#a382a2fb6ad5fed12522fe5585cc27dd0">scale</a>; <a class="code" href="a01812.html#a354edee99358ddac9ba8e1fb3f4bb453">pos1</a>.<a class="code" href="a01484.html#aa8c9461eb24bd2c364258078811a3e9d">z</a> *= <a class="code" href="a01812.html#a382a2fb6ad5fed12522fe5585cc27dd0">scale</a>;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  }</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;  <a class="code" href="a01484.html">Vector3</a> p2 = <a class="code" href="a01812.html#a85d838982d4ceb7b1b130df44de63e4e">pos0</a> + (<a class="code" href="a01812.html#a354edee99358ddac9ba8e1fb3f4bb453">pos1</a>-<a class="code" href="a01812.html#a85d838982d4ceb7b1b130df44de63e4e">pos0</a>) * dt;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160; </div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <a class="code" href="a01812.html#a85d838982d4ceb7b1b130df44de63e4e">pos0</a> = <a class="code" href="a01812.html#a354edee99358ddac9ba8e1fb3f4bb453">pos1</a>;</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <a class="code" href="a01812.html#a354edee99358ddac9ba8e1fb3f4bb453">pos1</a>.<a class="code" href="a01484.html#a7e2d3237b29a2f29d7b3d8b2934e35f2">x</a> += <a class="code" href="a00518.html#a5c1a231e208926858fefae841e160853">rnd</a>(2*<a class="code" href="a00518.html#a3e2de907625cc41fb2d7bc2762bd7549">RANDX</a>)-<a class="code" href="a00518.html#a3e2de907625cc41fb2d7bc2762bd7549">RANDX</a>; <a class="code" href="a01812.html#a354edee99358ddac9ba8e1fb3f4bb453">pos1</a>.<a class="code" href="a01484.html#a86eb35a9fa2d5a49e7fad66a35fa9c13">y</a> += <a class="code" href="a00518.html#a5c1a231e208926858fefae841e160853">rnd</a>(2*<a class="code" href="a00518.html#aa33237b8ed62658ffa1626eeecd566bc">RANDY</a>)-<a class="code" href="a00518.html#aa33237b8ed62658ffa1626eeecd566bc">RANDY</a>; <a class="code" href="a01812.html#a354edee99358ddac9ba8e1fb3f4bb453">pos1</a>.<a class="code" href="a01484.html#aa8c9461eb24bd2c364258078811a3e9d">z</a> += <a class="code" href="a00518.html#a5c1a231e208926858fefae841e160853">rnd</a>(2*<a class="code" href="a00518.html#a966b8ddbace046c7d1c3b3cacdbed52a">RANDZ</a>)-<a class="code" href="a00518.html#a966b8ddbace046c7d1c3b3cacdbed52a">RANDZ</a>;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160; </div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <a class="code" href="a01812.html#a1d7fff5a831c62f495f80202ce487b71">hair</a>-&gt;<a class="code" href="a01808.html#a542135d307b94e1cff88241b573d1571">animate</a>(dt, <a class="code" href="a01812.html#a0cec7a7aa012b6583b98f9464f72f318">posh</a> - p2); <span class="comment">// animate the hairs</span></div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  <a class="code" href="a01812.html#a0cec7a7aa012b6583b98f9464f72f318">posh</a> = p2;</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160; </div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;  <a class="code" href="a01812.html#a32f96585f466c7e46ef4cbcf4572920e">angle</a> += dt*20;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;}</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160; </div>
<div class="line"><a name="l00299"></a><span class="lineno"><a class="line" href="a01812.html#aa29f9ff49da875e9536a553d989a973b">  299</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01812.html#aa29f9ff49da875e9536a553d989a973b">Hairs::quit</a>()</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;{</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01812.html#a6ac41644982ec9a136dbd84d37e3e5ca">dlist</a>) { glDeleteLists(<a class="code" href="a01812.html#a6ac41644982ec9a136dbd84d37e3e5ca">dlist</a>, 1); <a class="code" href="a01812.html#a6ac41644982ec9a136dbd84d37e3e5ca">dlist</a> = 0; }</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;}</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160; </div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;<span class="comment">//-------------------------------------------------------------------</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="comment">//  File:   Object.cpp</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">//  Created:  01/12/99 0:24:AM</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="comment">//  Author:   Allard Jeremie</span></div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="comment">//  Comments: Create and manage Objects.</span></div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;<span class="comment">//-------------------------------------------------------------------</span></div>
<div class="line"><a name="l00310"></a><span class="lineno"><a class="line" href="a01796.html#a40860402e64d8008fb42329df7097cdb">  310</a></span>&#160;<a class="code" href="a01796.html#a40860402e64d8008fb42329df7097cdb">Object::Object</a>()</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;{</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <a class="code" href="a01796.html#a7733c75ab00848918a6afc221c65b48d">nbf</a> = <a class="code" href="a01796.html#a839ed231b3caeb71e26dbeb62a3bb825">nbp</a> = <a class="code" href="a01796.html#a2612b153664c3aa7254548fbd840b610">nbs</a> = 0;</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  <a class="code" href="a01796.html#a90bd2e691383db4c0d953e85af46656b">fc</a> = NULL;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  <a class="code" href="a01796.html#aefc63529644b3564420415bb22e9563c">pt</a> = NULL;</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;  <a class="code" href="a01796.html#ad197f5685958fb0673e531112cb97c5b">sf</a> = NULL;</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;}</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160; </div>
<div class="line"><a name="l00318"></a><span class="lineno"><a class="line" href="a01796.html#ae8f5483f459e46687bd01e6f9977afd3">  318</a></span>&#160;<a class="code" href="a01796.html#ae8f5483f459e46687bd01e6f9977afd3">Object::~Object</a>()</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;{</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <a class="code" href="a01796.html#a7733c75ab00848918a6afc221c65b48d">nbf</a> = 0; <a class="code" href="a01796.html#a839ed231b3caeb71e26dbeb62a3bb825">nbp</a> = 0;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01796.html#a90bd2e691383db4c0d953e85af46656b">fc</a>) { <span class="keyword">delete</span>[] <a class="code" href="a01796.html#a90bd2e691383db4c0d953e85af46656b">fc</a>; <a class="code" href="a01796.html#a90bd2e691383db4c0d953e85af46656b">fc</a> = NULL; }</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01796.html#aefc63529644b3564420415bb22e9563c">pt</a>) { <span class="keyword">delete</span>[] <a class="code" href="a01796.html#aefc63529644b3564420415bb22e9563c">pt</a>; <a class="code" href="a01796.html#aefc63529644b3564420415bb22e9563c">pt</a> = NULL; }</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01796.html#aefc63529644b3564420415bb22e9563c">pt</a>) { <span class="keyword">delete</span>[] <a class="code" href="a01796.html#aefc63529644b3564420415bb22e9563c">pt</a>; <a class="code" href="a01796.html#aefc63529644b3564420415bb22e9563c">pt</a> = NULL; }</div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;}</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160; </div>
<div class="line"><a name="l00326"></a><span class="lineno"><a class="line" href="a01780.html#a0cc34cdcabcf1d1fdec72ad299f7b089">  326</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01780.html#a0cc34cdcabcf1d1fdec72ad299f7b089">HVertex::put</a>(<span class="keywordtype">int</span> pdata)</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;{</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  <span class="keywordflow">if</span> (pdata &amp; <a class="code" href="a00518.html#af09aa26f1329c226dc2170488133957b">PUT_NORMAL</a>) glNormal3f(<a class="code" href="a01780.html#ae69f381d18fda8724b50c2c96c7f4b76">n</a>.<a class="code" href="a01484.html#a7e2d3237b29a2f29d7b3d8b2934e35f2">x</a>,<a class="code" href="a01780.html#ae69f381d18fda8724b50c2c96c7f4b76">n</a>.<a class="code" href="a01484.html#a86eb35a9fa2d5a49e7fad66a35fa9c13">y</a>,<a class="code" href="a01780.html#ae69f381d18fda8724b50c2c96c7f4b76">n</a>.<a class="code" href="a01484.html#aa8c9461eb24bd2c364258078811a3e9d">z</a>);</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;  <span class="keywordflow">if</span> (pdata &amp; <a class="code" href="a00518.html#a0568fed0bd52efb8b1fbc6366cc9f02e">PUT_COORD</a>)  glVertex3f(<a class="code" href="a01780.html#a2670328f4966d09ceb0f4d434d1d9666">p</a>.<a class="code" href="a01484.html#a7e2d3237b29a2f29d7b3d8b2934e35f2">x</a>,<a class="code" href="a01780.html#a2670328f4966d09ceb0f4d434d1d9666">p</a>.<a class="code" href="a01484.html#a86eb35a9fa2d5a49e7fad66a35fa9c13">y</a>,<a class="code" href="a01780.html#a2670328f4966d09ceb0f4d434d1d9666">p</a>.<a class="code" href="a01484.html#aa8c9461eb24bd2c364258078811a3e9d">z</a>);</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;}</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160; </div>
<div class="line"><a name="l00332"></a><span class="lineno"><a class="line" href="a00515.html#abacd3907763713d5f65e036510e2cff7">  332</a></span>&#160;<span class="keywordtype">bool</span> <a class="code" href="a00515.html#abacd3907763713d5f65e036510e2cff7">getSTRING</a>(FILE *fp, <span class="keywordtype">char</span> *s, <span class="keywordtype">int</span> *l)</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;{ <span class="comment">//lecture d&#39;une chaine de caracteres</span></div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;  <span class="keywordflow">for</span> (;;) {</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;    fread(s,2,1,fp);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;    <span class="keywordflow">if</span> (l != NULL) *l -= 2;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;    <span class="keywordflow">if</span> (s[0] == 0 || s[1] == 0) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;    s += 2;</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  }</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="keywordflow">return</span> <span class="keyword">true</span>;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;}</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160; </div>
<div class="line"><a name="l00343"></a><span class="lineno"><a class="line" href="a01812.html#ad67b5276fb5a3d62e4df324999e7554c">  343</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01812.html#ad67b5276fb5a3d62e4df324999e7554c">Hairs::httpReader</a>(<span class="keywordtype">void</span> *_lwo, <a class="code" href="a01424.html">Http</a> *http)</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;{</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;  <a class="code" href="a01796.html">Object</a> *lwo = (<a class="code" href="a01796.html">Object</a> *) _lwo;</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160; </div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="keywordflow">if</span> (! lwo) <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160; </div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  int32_t len = 0, l = 0;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  int16_t w = 0, nw = 0;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordtype">int</span> i = 0, j = 0, sp = 0;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;  <span class="keywordtype">float</span> f = 0;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;  <span class="keyword">union </span>{</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    uint32_t id;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keywordtype">char</span> sid[5];</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;  };</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;  sid[4] = 0;</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;  <a class="code" href="a01792.html">Surface</a> *ss = NULL;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;  <span class="keywordtype">bool</span> littleendian;</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;  <span class="keywordtype">char</span> tmp; <span class="comment">//SWAPL</span></div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;  <span class="keywordtype">char</span> str[BUFSIZ];</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160; </div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;  FILE *fp = <a class="code" href="a01384.html#a35f7344ad44f891b909bcf7c31e276ca">Cache::openCache</a>(<a class="code" href="a00515.html#a106ebc4b822f29d77873b4b2b1b9617e">hairs</a>-&gt;<a class="code" href="a02108.html#a0467a0f9bfe81bd0d17c85e97cc3f515">urlName</a>(), http);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160; </div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;  <span class="comment">/* check for headers */</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;  littleendian = <a class="code" href="a01400.html#ab4b0b1135bc883b72a26bf186c369f84">File::littleEndian</a>();</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;  <a class="code" href="a00041.html#abd34ebec1a69975cf961f9a888d94d26">trace</a>(<a class="code" href="a00044.html#a34617f3ac0249ca877bddc57f6982401">DBG_MOD</a>,<span class="stringliteral">&quot;%s&quot;</span>, littleendian ? <span class="stringliteral">&quot;LittleEndian&quot;</span> : <span class="stringliteral">&quot;BigEndian&quot;</span>);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;  fread(&amp;<span class="keywordtype">id</span>, 4, 1, fp);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a00176.html#af4abc8b6ec5c091297406f51429abbde">stringcmp</a>(sid, <span class="stringliteral">&quot;FORM&quot;</span>)) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;not a ID_FORM&quot;</span>); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;  fread(&amp;len, 4, 1, fp);</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;  <a class="code" href="a00047.html#ae49fb908baa74033cb5c3f954c54f1b6">SWAPL</a>(&amp;len, tmp);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;  fread(&amp;<span class="keywordtype">id</span>, 4, 1, fp); len -= 4;</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a00176.html#af4abc8b6ec5c091297406f51429abbde">stringcmp</a>(sid, <span class="stringliteral">&quot;LWOB&quot;</span>)) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;not a LWOB file&quot;</span>); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160; </div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;  <span class="keywordflow">while</span> (len &gt; 0) {</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;    fread(&amp;<span class="keywordtype">id</span>, 4, 1, fp);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;    <span class="comment">//error(&quot;%d %s&quot;, len, sid);</span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;    len -= 4;</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;    fread(&amp;l, 4, 1, fp); len -= 4;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    <a class="code" href="a00047.html#ae49fb908baa74033cb5c3f954c54f1b6">SWAPL</a>(&amp;l, tmp);</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;    <span class="keywordflow">if</span> (l &gt; len) { <a class="code" href="a00041.html#abd34ebec1a69975cf961f9a888d94d26">trace</a>(<a class="code" href="a00044.html#a34617f3ac0249ca877bddc57f6982401">DBG_MOD</a>, <span class="stringliteral">&quot;bad size: end after EOF (id=%s),l=%d len=%d&quot;</span>,sid,l,len); <span class="comment">/*return;*/</span> }</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;    <span class="comment">//error(&quot;chunk: %x(%s) size=%d&quot;,id,sid,l);</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;    len -= l;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160; </div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    <span class="keywordflow">if</span> (! <a class="code" href="a00176.html#af4abc8b6ec5c091297406f51429abbde">stringcmp</a>(sid, <span class="stringliteral">&quot;SRFS&quot;</span>)) { <span class="comment">// SRFS</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="keywordflow">if</span> (lwo-&gt;<a class="code" href="a01796.html#a2612b153664c3aa7254548fbd840b610">nbs</a>) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;SRFS&quot;</span>); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      lwo-&gt;<a class="code" href="a01796.html#a2612b153664c3aa7254548fbd840b610">nbs</a>++;</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;      sp = ftell(fp);</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <span class="keywordflow">while</span> (l &gt; 0) {</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;        <a class="code" href="a00515.html#abacd3907763713d5f65e036510e2cff7">getSTRING</a>(fp, str, &amp;l);</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;        <a class="code" href="a00041.html#abd34ebec1a69975cf961f9a888d94d26">trace</a>(<a class="code" href="a00044.html#a34617f3ac0249ca877bddc57f6982401">DBG_MOD</a>, <span class="stringliteral">&quot;str=%s&quot;</span>, str);</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="comment">//if (l&lt;0) { error(&quot;bad SRFS size&quot;); return; }</span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      }</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      fseek(fp,sp,0);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <span class="keywordflow">if</span> (lwo-&gt;<a class="code" href="a01796.html#a2612b153664c3aa7254548fbd840b610">nbs</a>) {</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        lwo-&gt;<a class="code" href="a01796.html#ad197f5685958fb0673e531112cb97c5b">sf</a> = <span class="keyword">new</span> <a class="code" href="a01792.html">Surface</a>[lwo-&gt;<a class="code" href="a01796.html#a2612b153664c3aa7254548fbd840b610">nbs</a>];</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;        <span class="keywordflow">for</span> (j=0; j&lt;lwo-&gt;<a class="code" href="a01796.html#a2612b153664c3aa7254548fbd840b610">nbs</a>; ++j) {</div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;          <a class="code" href="a00515.html#abacd3907763713d5f65e036510e2cff7">getSTRING</a>(fp, lwo-&gt;<a class="code" href="a01796.html#ad197f5685958fb0673e531112cb97c5b">sf</a>[j].<a class="code" href="a01784.html#a26e3aef06c23cfe058ac7671d91593e0">name</a>, NULL);</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;          <span class="comment">//error(&quot;Surface: %s&quot;, lwo-&gt;sf[j].name);</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;        }</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;      }</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;    }</div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (! <a class="code" href="a00176.html#af4abc8b6ec5c091297406f51429abbde">stringcmp</a>(sid, <span class="stringliteral">&quot;SURF&quot;</span>)) { <span class="comment">// SURF</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;      <span class="comment">//if (! lwo-&gt;nbs) { error(&quot;no SURF&quot;); return; }</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;      <a class="code" href="a00515.html#abacd3907763713d5f65e036510e2cff7">getSTRING</a>(fp, str, &amp;l);</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;      <span class="comment">//error(&quot;SURF=%s&quot;, str);</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;      <span class="keywordflow">if</span> (l&lt;0) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;bad SURF size&quot;</span>); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;      <span class="keywordflow">for</span> (j=0; j&lt;lwo-&gt;<a class="code" href="a01796.html#a2612b153664c3aa7254548fbd840b610">nbs</a> ; ++j)</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="a00176.html#a706b36f3a672f84685576723c3928baa">strcasecmp</a>(str, lwo-&gt;<a class="code" href="a01796.html#ad197f5685958fb0673e531112cb97c5b">sf</a>[j].<a class="code" href="a01784.html#a26e3aef06c23cfe058ac7671d91593e0">name</a>)) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;      <span class="keywordflow">if</span> (j == lwo-&gt;<a class="code" href="a01796.html#a2612b153664c3aa7254548fbd840b610">nbs</a>) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;unknown SURF:%s&quot;</span>,str); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;      ss = &amp;lwo-&gt;<a class="code" href="a01796.html#ad197f5685958fb0673e531112cb97c5b">sf</a>[j];</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;      ss-&gt;<a class="code" href="a01784.html#a4dc22dce3e39672876a6634af6dbd114">flag</a> = 0;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;      <span class="keywordtype">int</span> ll;</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;      <a class="code" href="a01768.html">Color4f</a> colr(.5,.5,.5);</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;      <span class="keywordtype">float</span> lumi = 0;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;      <span class="keywordtype">float</span> diff = 1.;</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;      <span class="keywordtype">float</span> spec = 0;</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;      <span class="keywordtype">int</span> glos = 64;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;      <span class="keywordtype">float</span> refl = 0;</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;      <span class="keywordtype">float</span> trans = 0;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      uint8_t byte;</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160; </div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;      <span class="keywordflow">while</span> (l &gt; 0) {</div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;        fread(&amp;<span class="keywordtype">id</span>,4,1,fp); l -= 4;</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;        fread(&amp;ll,4,1,fp); l -= 4;</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;        <a class="code" href="a00047.html#ae49fb908baa74033cb5c3f954c54f1b6">SWAPL</a>(&amp;ll, tmp);</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;        <span class="keywordflow">if</span> (ll &gt; l) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;bad chunk: after EOF (id=%s),ll=%d l=%d%x&quot;</span>,sid,ll,l); <span class="comment">/*return;*/</span> }</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;        l -= ll;</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;        <span class="comment">//error(&quot;sid=%s l=%d ll=%s&quot;, sid, l, ll);</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;        <span class="keywordflow">if</span> (! <a class="code" href="a00176.html#af4abc8b6ec5c091297406f51429abbde">stringcmp</a>(sid, <span class="stringliteral">&quot;FLAG&quot;</span>)) { <span class="comment">//FLAG</span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;          <span class="keywordflow">if</span> (ll != 2) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;invalid FLAG size&quot;</span>); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;          fread(&amp;w,2,1,fp); <a class="code" href="a00047.html#ae379a37781a90a61d1bb93aa8b41e05e">SWAPS</a>(&amp;w, tmp); ll -= <span class="keyword">sizeof</span>(w);</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;          <span class="keywordflow">if</span> (w&amp;4)   ss-&gt;<a class="code" href="a01784.html#a4dc22dce3e39672876a6634af6dbd114">flag</a> |= <a class="code" href="a01784.html#a0344b22e141951415e5c66d2142beae5a50254172e5f1e320fdab257daf9cb9db">Material::Smooth</a>; <span class="comment">//&amp;=~Material::Flat;</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;          <span class="keywordflow">if</span> (w&amp;256) ss-&gt;<a class="code" href="a01784.html#a4dc22dce3e39672876a6634af6dbd114">flag</a> |= <a class="code" href="a01784.html#a0344b22e141951415e5c66d2142beae5a34979e08449521720c2eee13a4a9bb78">Material::Double</a>;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;          <span class="keywordflow">if</span> (w&amp;512) ss-&gt;<a class="code" href="a01784.html#a4dc22dce3e39672876a6634af6dbd114">flag</a> |= <a class="code" href="a01784.html#a0344b22e141951415e5c66d2142beae5a7608a9c6bfea3ca3e6d2257640bf6628">Material::Blend</a>|<a class="code" href="a01784.html#a0344b22e141951415e5c66d2142beae5af333b503ce92de401b8b731ce55ee5b8">Material::Additive</a>;</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;        }</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (! <a class="code" href="a00176.html#af4abc8b6ec5c091297406f51429abbde">stringcmp</a>(sid, <span class="stringliteral">&quot;COLR&quot;</span>)) { <span class="comment">//COLR</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;          <span class="keywordflow">if</span> (ll != 4) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;invalid COLR size&quot;</span>); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;          fread(&amp;<span class="keywordtype">byte</span>,1,1,fp);</div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;          colr.<a class="code" href="a01768.html#a8847fbffe7a19883edf391fd6d65e611">r</a> = <span class="keywordtype">byte</span>*(1./255.);</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;          fread(&amp;<span class="keywordtype">byte</span>,1,1,fp);</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;          colr.<a class="code" href="a01768.html#a8c646470c48187666dd1c2229a8176b8">g</a> = <span class="keywordtype">byte</span>*(1./255.);</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;          fread(&amp;<span class="keywordtype">byte</span>,1,1,fp);</div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;          colr.<a class="code" href="a01768.html#a327fbb9795c268dbd99614befbde2f75">b</a> = <span class="keywordtype">byte</span>*(1./255.);</div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;          fread(&amp;<span class="keywordtype">byte</span>,1,1,fp);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;          l -= 3;</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;        }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (! <a class="code" href="a00176.html#af4abc8b6ec5c091297406f51429abbde">stringcmp</a>(sid, <span class="stringliteral">&quot;LUMI&quot;</span>)) { <span class="comment">//LUMI</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;          <span class="keywordflow">if</span> (ll != 2) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;invalid LUMI size&quot;</span>); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;          fread(&amp;w,2,1,fp); <a class="code" href="a00047.html#ae379a37781a90a61d1bb93aa8b41e05e">SWAPS</a>(&amp;w, tmp); l -= <span class="keyword">sizeof</span>(w);</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;          lumi = w*(1./255.);</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;        }</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (! <a class="code" href="a00176.html#af4abc8b6ec5c091297406f51429abbde">stringcmp</a>(sid, <span class="stringliteral">&quot;DIFF&quot;</span>)) { <span class="comment">//DIFF</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;          <span class="keywordflow">if</span> (ll != 2) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;invalid DIFF size&quot;</span>); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;          fread(&amp;w,2,1,fp); <a class="code" href="a00047.html#ae379a37781a90a61d1bb93aa8b41e05e">SWAPS</a>(&amp;w, tmp); l -= <span class="keyword">sizeof</span>(w);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;          diff = w*(1./255.);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;        }</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (! <a class="code" href="a00176.html#af4abc8b6ec5c091297406f51429abbde">stringcmp</a>(sid, <span class="stringliteral">&quot;SPEC&quot;</span>)) { <span class="comment">//SPEC</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;          <span class="keywordflow">if</span> (ll != 2) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;invalid SPEC size&quot;</span>); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;          fread(&amp;w,2,1,fp); <a class="code" href="a00047.html#ae379a37781a90a61d1bb93aa8b41e05e">SWAPS</a>(&amp;w, tmp); l -= <span class="keyword">sizeof</span>(w);</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;          diff = w*(1./255.);</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;          spec = w*(1./255.);</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;        }</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (! <a class="code" href="a00176.html#af4abc8b6ec5c091297406f51429abbde">stringcmp</a>(sid, <span class="stringliteral">&quot;GLOS&quot;</span>)) { <span class="comment">//GLOS</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;          <span class="keywordflow">if</span> (ll != 2) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;invalid GLOS size&quot;</span>); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;          fread(&amp;w,2,1,fp); <a class="code" href="a00047.html#ae379a37781a90a61d1bb93aa8b41e05e">SWAPS</a>(&amp;w, tmp); l -= <span class="keyword">sizeof</span>(w);</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;          glos = w;</div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;        }</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (! <a class="code" href="a00176.html#af4abc8b6ec5c091297406f51429abbde">stringcmp</a>(sid, <span class="stringliteral">&quot;REFL&quot;</span>)) { <span class="comment">//REFL</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;          <span class="keywordflow">if</span> (ll != 2) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;invalid REFL size&quot;</span>); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;          fread(&amp;w,2,1,fp); <a class="code" href="a00047.html#ae379a37781a90a61d1bb93aa8b41e05e">SWAPS</a>(&amp;w, tmp); l -= <span class="keyword">sizeof</span>(w);</div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;          refl = w*(1./255.);</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;        }</div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (! <a class="code" href="a00176.html#af4abc8b6ec5c091297406f51429abbde">stringcmp</a>(sid, <span class="stringliteral">&quot;TRAN&quot;</span>)) { <span class="comment">//TRAN</span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;          <span class="keywordflow">if</span> (ll != 2) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;invalid TRAN size&quot;</span>); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;          fread(&amp;w,2,1,fp); <a class="code" href="a00047.html#ae379a37781a90a61d1bb93aa8b41e05e">SWAPS</a>(&amp;w, tmp); l -= <span class="keyword">sizeof</span>(w);</div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;          trans = 0.5f; <span class="comment">//w*(1./255.);</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;        }</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;        <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;          <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;unkown SURF:%s&quot;</span>,sid);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;          fseek(fp, ll, 1);</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;        }</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;      }</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;      colr.<a class="code" href="a01768.html#a3d576c84cd596acb80d08268ee98101e">a</a> = 1. - trans;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;      <span class="keywordflow">if</span> (trans) ss-&gt;<a class="code" href="a01784.html#a4dc22dce3e39672876a6634af6dbd114">flag</a> |= <a class="code" href="a01784.html#a0344b22e141951415e5c66d2142beae5a7608a9c6bfea3ca3e6d2257640bf6628">Material::Blend</a>;</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;      ss-&gt;<a class="code" href="a01792.html#aa409ccb88b301d735f37e580f114facb">ambient</a>.r = colr.<a class="code" href="a01768.html#a8847fbffe7a19883edf391fd6d65e611">r</a>*lumi;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;      ss-&gt;<a class="code" href="a01792.html#aa409ccb88b301d735f37e580f114facb">ambient</a>.g = colr.<a class="code" href="a01768.html#a8c646470c48187666dd1c2229a8176b8">g</a>*lumi;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;      ss-&gt;<a class="code" href="a01792.html#aa409ccb88b301d735f37e580f114facb">ambient</a>.b = colr.<a class="code" href="a01768.html#a327fbb9795c268dbd99614befbde2f75">b</a>*lumi;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;      ss-&gt;<a class="code" href="a01792.html#aa409ccb88b301d735f37e580f114facb">ambient</a>.a = colr.<a class="code" href="a01768.html#a3d576c84cd596acb80d08268ee98101e">a</a>;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;      ss-&gt;<a class="code" href="a01792.html#a6076a78e42013470dddcc63441bcc818">diffuse</a>.r = colr.<a class="code" href="a01768.html#a8847fbffe7a19883edf391fd6d65e611">r</a>*diff;</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;      ss-&gt;<a class="code" href="a01792.html#a6076a78e42013470dddcc63441bcc818">diffuse</a>.g = colr.<a class="code" href="a01768.html#a8c646470c48187666dd1c2229a8176b8">g</a>*diff;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;      ss-&gt;<a class="code" href="a01792.html#a6076a78e42013470dddcc63441bcc818">diffuse</a>.b = colr.<a class="code" href="a01768.html#a327fbb9795c268dbd99614befbde2f75">b</a>*diff;</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;      ss-&gt;<a class="code" href="a01792.html#a6076a78e42013470dddcc63441bcc818">diffuse</a>.a = colr.<a class="code" href="a01768.html#a3d576c84cd596acb80d08268ee98101e">a</a>;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;      ss-&gt;<a class="code" href="a01792.html#ab667b997cce3d2d28078c589eec3f42e">specular</a>.r = spec;</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;      ss-&gt;<a class="code" href="a01792.html#ab667b997cce3d2d28078c589eec3f42e">specular</a>.g = spec;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;      ss-&gt;<a class="code" href="a01792.html#ab667b997cce3d2d28078c589eec3f42e">specular</a>.b = spec;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;      ss-&gt;<a class="code" href="a01792.html#ab667b997cce3d2d28078c589eec3f42e">specular</a>.a = colr.<a class="code" href="a01768.html#a3d576c84cd596acb80d08268ee98101e">a</a>;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;      ss-&gt;<a class="code" href="a01784.html#a38c40dc9e7c0585f213b225210d67908">emission</a>.<a class="code" href="a01768.html#a8847fbffe7a19883edf391fd6d65e611">r</a> = colr.<a class="code" href="a01768.html#a8847fbffe7a19883edf391fd6d65e611">r</a>*refl;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;      ss-&gt;<a class="code" href="a01784.html#a38c40dc9e7c0585f213b225210d67908">emission</a>.<a class="code" href="a01768.html#a8c646470c48187666dd1c2229a8176b8">g</a> = colr.<a class="code" href="a01768.html#a8c646470c48187666dd1c2229a8176b8">g</a>*refl;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;      ss-&gt;<a class="code" href="a01784.html#a38c40dc9e7c0585f213b225210d67908">emission</a>.<a class="code" href="a01768.html#a327fbb9795c268dbd99614befbde2f75">b</a> = colr.<a class="code" href="a01768.html#a327fbb9795c268dbd99614befbde2f75">b</a>*refl;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;      ss-&gt;<a class="code" href="a01784.html#a38c40dc9e7c0585f213b225210d67908">emission</a>.<a class="code" href="a01768.html#a3d576c84cd596acb80d08268ee98101e">a</a> = colr.<a class="code" href="a01768.html#a3d576c84cd596acb80d08268ee98101e">a</a>;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;      ss-&gt;<a class="code" href="a01784.html#a12d76356d4d322ac01f39cff93e7fc10">shininess</a> = glos;</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;      <span class="keywordflow">if</span> (diff || spec || refl) ss-&gt;<a class="code" href="a01784.html#a4dc22dce3e39672876a6634af6dbd114">flag</a> |= <a class="code" href="a01784.html#a0344b22e141951415e5c66d2142beae5aaa69deeb90cac2d36d4bed35777c9863">Material::Lighting</a>;</div>
<div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;      <span class="keywordflow">else</span> ss-&gt;<a class="code" href="a01784.html#a4dc22dce3e39672876a6634af6dbd114">flag</a> &amp;= ~<a class="code" href="a01784.html">Material</a>::Smooth;</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;    }</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (! <a class="code" href="a00176.html#af4abc8b6ec5c091297406f51429abbde">stringcmp</a>(sid, <span class="stringliteral">&quot;PNTS&quot;</span>)) { <span class="comment">// PNTS</span></div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;      <span class="keywordflow">if</span> (lwo-&gt;<a class="code" href="a01796.html#a839ed231b3caeb71e26dbeb62a3bb825">nbp</a>) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;PNTS&quot;</span>); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;      <span class="keywordflow">if</span> (l % (3*<span class="keyword">sizeof</span>(<span class="keywordtype">float</span>))) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;bad PNTS size&quot;</span>); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;      lwo-&gt;<a class="code" href="a01796.html#a839ed231b3caeb71e26dbeb62a3bb825">nbp</a> = l/(3*<span class="keyword">sizeof</span>(float));</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      <span class="keywordflow">if</span> (lwo-&gt;<a class="code" href="a01796.html#a839ed231b3caeb71e26dbeb62a3bb825">nbp</a>) {</div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        lwo-&gt;<a class="code" href="a01796.html#aefc63529644b3564420415bb22e9563c">pt</a> = <span class="keyword">new</span> <a class="code" href="a01780.html">HVertex</a>[lwo-&gt;<a class="code" href="a01796.html#a839ed231b3caeb71e26dbeb62a3bb825">nbp</a>];</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        <span class="keywordflow">for</span> (j=0; j&lt;lwo-&gt;<a class="code" href="a01796.html#a839ed231b3caeb71e26dbeb62a3bb825">nbp</a> ; j++) {</div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;          fread(&amp;f,4,1,fp);</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;          <a class="code" href="a00047.html#ae49fb908baa74033cb5c3f954c54f1b6">SWAPL</a>(&amp;f, tmp);</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;          lwo-&gt;<a class="code" href="a01796.html#aefc63529644b3564420415bb22e9563c">pt</a>[j].<a class="code" href="a01780.html#a2670328f4966d09ceb0f4d434d1d9666">p</a>.<a class="code" href="a01484.html#a7e2d3237b29a2f29d7b3d8b2934e35f2">x</a> = f * lwo-&gt;<a class="code" href="a01796.html#a8082d05379c1b91bc5d6b014e54049ba">scal</a>;</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;          fread(&amp;f,4,1,fp);</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;          <a class="code" href="a00047.html#ae49fb908baa74033cb5c3f954c54f1b6">SWAPL</a>(&amp;f, tmp);</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;          lwo-&gt;<a class="code" href="a01796.html#aefc63529644b3564420415bb22e9563c">pt</a>[j].<a class="code" href="a01780.html#a2670328f4966d09ceb0f4d434d1d9666">p</a>.<a class="code" href="a01484.html#a86eb35a9fa2d5a49e7fad66a35fa9c13">y</a> = f * lwo-&gt;<a class="code" href="a01796.html#a8082d05379c1b91bc5d6b014e54049ba">scal</a>;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;          fread(&amp;f,4,1,fp);</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;          <a class="code" href="a00047.html#ae49fb908baa74033cb5c3f954c54f1b6">SWAPL</a>(&amp;f, tmp);</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;          lwo-&gt;<a class="code" href="a01796.html#aefc63529644b3564420415bb22e9563c">pt</a>[j].<a class="code" href="a01780.html#a2670328f4966d09ceb0f4d434d1d9666">p</a>.<a class="code" href="a01484.html#aa8c9461eb24bd2c364258078811a3e9d">z</a> = f * lwo-&gt;<a class="code" href="a01796.html#a8082d05379c1b91bc5d6b014e54049ba">scal</a>;</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;        }</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;      }</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;    }</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (! <a class="code" href="a00176.html#af4abc8b6ec5c091297406f51429abbde">stringcmp</a>(sid, <span class="stringliteral">&quot;POLS&quot;</span>)) { <span class="comment">// POLS</span></div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;      <span class="keywordflow">if</span> (lwo-&gt;<a class="code" href="a01796.html#a7733c75ab00848918a6afc221c65b48d">nbf</a>) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;POLS&quot;</span>); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;      sp = ftell(fp);</div>
<div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;      j = 0; lwo-&gt;<a class="code" href="a01796.html#a7733c75ab00848918a6afc221c65b48d">nbf</a> = 0;</div>
<div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;      <span class="keywordflow">while</span> (j&lt;l) {</div>
<div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;        fread(&amp;w,2,1,fp);</div>
<div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;        <a class="code" href="a00047.html#ae379a37781a90a61d1bb93aa8b41e05e">SWAPS</a>(&amp;w, tmp);</div>
<div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;        j += 2;</div>
<div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;        fseek(fp, 2*w+2, 1);</div>
<div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;        j += 2*w+2;</div>
<div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;        <span class="keywordflow">if</span> (w&gt;=3)</div>
<div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;          lwo-&gt;<a class="code" href="a01796.html#a7733c75ab00848918a6afc221c65b48d">nbf</a> += w-2;</div>
<div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;      }</div>
<div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      <span class="keywordflow">if</span> (j&gt;l) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;bad POLS %d!=%d&quot;</span>,l,j); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;      <span class="comment">//error(&quot;nbf=%d&quot;,lwo-&gt;nbf);</span></div>
<div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;      fseek(fp, sp, 0);</div>
<div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;      <span class="keywordflow">if</span> (lwo-&gt;<a class="code" href="a01796.html#a7733c75ab00848918a6afc221c65b48d">nbf</a>) {</div>
<div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;        lwo-&gt;<a class="code" href="a01796.html#a90bd2e691383db4c0d953e85af46656b">fc</a> = <span class="keyword">new</span> <a class="code" href="a01788.html">TriFace</a>[lwo-&gt;<a class="code" href="a01796.html#a7733c75ab00848918a6afc221c65b48d">nbf</a>];</div>
<div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;        <span class="keywordflow">for</span> (j=0; j&lt;lwo-&gt;<a class="code" href="a01796.html#a7733c75ab00848918a6afc221c65b48d">nbf</a> ; j++) {</div>
<div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;          fread(&amp;nw,2,1,fp);</div>
<div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;          <a class="code" href="a00047.html#ae379a37781a90a61d1bb93aa8b41e05e">SWAPS</a>(&amp;nw, tmp);</div>
<div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;          l -= 4+nw*2;</div>
<div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;          <span class="keywordflow">if</span> (nw &lt;= 2) fseek(fp, 2*nw+2, 1);</div>
<div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;          <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;            fread(&amp;w,2,1,fp);</div>
<div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;            <a class="code" href="a00047.html#ae379a37781a90a61d1bb93aa8b41e05e">SWAPS</a>(&amp;w, tmp);</div>
<div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;            <span class="keywordflow">if</span> (w &gt;= lwo-&gt;<a class="code" href="a01796.html#a839ed231b3caeb71e26dbeb62a3bb825">nbp</a>) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;point inexistant:%x (face %d)&quot;</span>,w,j); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;            lwo-&gt;<a class="code" href="a01796.html#a90bd2e691383db4c0d953e85af46656b">fc</a>[j].<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[0] = &amp;(lwo-&gt;<a class="code" href="a01796.html#aefc63529644b3564420415bb22e9563c">pt</a>[w]);</div>
<div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;            fread(&amp;w,2,1,fp);</div>
<div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;            <a class="code" href="a00047.html#ae379a37781a90a61d1bb93aa8b41e05e">SWAPS</a>(&amp;w, tmp);</div>
<div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;            <span class="keywordflow">if</span> (w &gt;= lwo-&gt;<a class="code" href="a01796.html#a839ed231b3caeb71e26dbeb62a3bb825">nbp</a>) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;point inexistant:%x (face %d)&quot;</span>,w,j); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;            lwo-&gt;<a class="code" href="a01796.html#a90bd2e691383db4c0d953e85af46656b">fc</a>[j].<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[1] = &amp;(lwo-&gt;<a class="code" href="a01796.html#aefc63529644b3564420415bb22e9563c">pt</a>[w]);</div>
<div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;            fread(&amp;w,2,1,fp);</div>
<div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;            <a class="code" href="a00047.html#ae379a37781a90a61d1bb93aa8b41e05e">SWAPS</a>(&amp;w, tmp);</div>
<div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;            <span class="keywordflow">if</span> (w &gt;= lwo-&gt;<a class="code" href="a01796.html#a839ed231b3caeb71e26dbeb62a3bb825">nbp</a>) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;point inexistant:%x (face %d)&quot;</span>,w,j); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;            lwo-&gt;<a class="code" href="a01796.html#a90bd2e691383db4c0d953e85af46656b">fc</a>[j].<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[2] = &amp;(lwo-&gt;<a class="code" href="a01796.html#aefc63529644b3564420415bb22e9563c">pt</a>[w]);</div>
<div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;            i = j;</div>
<div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;            <span class="keywordflow">while</span> (nw &gt; 3) {</div>
<div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;              ++j; --nw;</div>
<div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;              lwo-&gt;<a class="code" href="a01796.html#a90bd2e691383db4c0d953e85af46656b">fc</a>[j].<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[0] = lwo-&gt;<a class="code" href="a01796.html#a90bd2e691383db4c0d953e85af46656b">fc</a>[i].<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[0];</div>
<div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;              lwo-&gt;<a class="code" href="a01796.html#a90bd2e691383db4c0d953e85af46656b">fc</a>[j].<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[1] = lwo-&gt;<a class="code" href="a01796.html#a90bd2e691383db4c0d953e85af46656b">fc</a>[j-1].<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[2];</div>
<div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;              fread(&amp;w,2,1,fp);</div>
<div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;              <a class="code" href="a00047.html#ae379a37781a90a61d1bb93aa8b41e05e">SWAPS</a>(&amp;w, tmp);</div>
<div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;              <span class="keywordflow">if</span> (w &gt;= lwo-&gt;<a class="code" href="a01796.html#a839ed231b3caeb71e26dbeb62a3bb825">nbp</a>) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;point inexistant:%x (face %d)&quot;</span>,w,j); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;              lwo-&gt;<a class="code" href="a01796.html#a90bd2e691383db4c0d953e85af46656b">fc</a>[j].<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[2] = &amp;(lwo-&gt;<a class="code" href="a01796.html#aefc63529644b3564420415bb22e9563c">pt</a>[w]);</div>
<div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;            }</div>
<div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;            fread(&amp;w,2,1,fp); <span class="comment">// lecture de la surface</span></div>
<div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;            <a class="code" href="a00047.html#ae379a37781a90a61d1bb93aa8b41e05e">SWAPS</a>(&amp;w, tmp);</div>
<div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;            <span class="keywordflow">if</span> (w==0 || w&gt;lwo-&gt;<a class="code" href="a01796.html#a2612b153664c3aa7254548fbd840b610">nbs</a>) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;surface inexistante:%x&quot;</span>,w); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;            lwo-&gt;<a class="code" href="a01796.html#ad197f5685958fb0673e531112cb97c5b">sf</a>[w-1].<a class="code" href="a01792.html#a52f45d05b60ad64ef135fc5853f04405">nbf</a> += 1+j-i;</div>
<div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;            <span class="keywordflow">while</span> (i&lt;=j) lwo-&gt;<a class="code" href="a01796.html#a90bd2e691383db4c0d953e85af46656b">fc</a>[i++].<a class="code" href="a01788.html#a6f49ce3313b38196603917bd7c0cbf4a">m</a> = &amp;lwo-&gt;<a class="code" href="a01796.html#ad197f5685958fb0673e531112cb97c5b">sf</a>[w-1]; <span class="comment">//psurf[w-1];</span></div>
<div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;          }</div>
<div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;        }</div>
<div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        <span class="keywordflow">if</span> (j != lwo-&gt;<a class="code" href="a01796.html#a7733c75ab00848918a6afc221c65b48d">nbf</a>) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;bad poly number:%d instead of %d&quot;</span>,j,lwo-&gt;<a class="code" href="a01796.html#a7733c75ab00848918a6afc221c65b48d">nbf</a>); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordflow">if</span> (lwo-&gt;<a class="code" href="a01796.html#a2612b153664c3aa7254548fbd840b610">nbs</a>) {</div>
<div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;          <a class="code" href="a01788.html">TriFace</a> *fb = lwo-&gt;<a class="code" href="a01796.html#a90bd2e691383db4c0d953e85af46656b">fc</a>;</div>
<div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;          lwo-&gt;<a class="code" href="a01796.html#a90bd2e691383db4c0d953e85af46656b">fc</a> = <span class="keyword">new</span> <a class="code" href="a01788.html">TriFace</a>[lwo-&gt;<a class="code" href="a01796.html#a7733c75ab00848918a6afc221c65b48d">nbf</a>];</div>
<div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;          i = 0;</div>
<div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;          <span class="keywordflow">for</span> (j=0; j&lt;lwo-&gt;<a class="code" href="a01796.html#a2612b153664c3aa7254548fbd840b610">nbs</a> ; ++j) {</div>
<div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;            lwo-&gt;<a class="code" href="a01796.html#ad197f5685958fb0673e531112cb97c5b">sf</a>[j].<a class="code" href="a01792.html#ac40c3916e0257ea51763f92394d705ee">fc</a> = lwo-&gt;<a class="code" href="a01796.html#a90bd2e691383db4c0d953e85af46656b">fc</a>+i;</div>
<div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;            i += lwo-&gt;<a class="code" href="a01796.html#ad197f5685958fb0673e531112cb97c5b">sf</a>[j].<a class="code" href="a01792.html#a52f45d05b60ad64ef135fc5853f04405">nbf</a>;</div>
<div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;            lwo-&gt;<a class="code" href="a01796.html#ad197f5685958fb0673e531112cb97c5b">sf</a>[j].<a class="code" href="a01792.html#a52f45d05b60ad64ef135fc5853f04405">nbf</a> = 0;</div>
<div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;          }</div>
<div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;          <span class="keywordflow">if</span> (i != lwo-&gt;<a class="code" href="a01796.html#a7733c75ab00848918a6afc221c65b48d">nbf</a>) { <a class="code" href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a>(<span class="stringliteral">&quot;faces material num err: %d!=%d&quot;</span>,i,lwo-&gt;<a class="code" href="a01796.html#a7733c75ab00848918a6afc221c65b48d">nbf</a>); <span class="keywordflow">return</span>; }</div>
<div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160; </div>
<div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;          <a class="code" href="a01792.html">Surface</a> *s;</div>
<div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;          <span class="keywordflow">for</span> (j=0; j &lt; lwo-&gt;<a class="code" href="a01796.html#a7733c75ab00848918a6afc221c65b48d">nbf</a> ;++j) {</div>
<div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;            s = (<a class="code" href="a01792.html">Surface</a>*) fb[j].m;</div>
<div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;            s-&gt;<a class="code" href="a01792.html#ac40c3916e0257ea51763f92394d705ee">fc</a>[s-&gt;<a class="code" href="a01792.html#a52f45d05b60ad64ef135fc5853f04405">nbf</a>++] = fb[j];</div>
<div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;          }</div>
<div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;          <span class="keywordflow">if</span> (fb) <span class="keyword">delete</span>[] fb;</div>
<div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        }</div>
<div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;      }</div>
<div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;      <span class="keywordflow">if</span> (l) {</div>
<div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;        fseek(fp, l, 1);</div>
<div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;        l = 0;</div>
<div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;      }</div>
<div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;    }</div>
<div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;    <span class="keywordflow">else</span> <span class="comment">//cout &lt;&lt; &quot;unknown &quot;&lt;&lt;(char*)&amp;id&lt;&lt;&quot; chunk\n&quot;;</span></div>
<div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;      fseek(fp, l, 1);</div>
<div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;      <span class="comment">//error(&quot;end chunk ------------ sid=%s len=%d l=%d&quot;, sid, len, l);</span></div>
<div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;  } <span class="comment">//end while</span></div>
<div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;  <a class="code" href="a00041.html#abd34ebec1a69975cf961f9a888d94d26">trace</a>(<a class="code" href="a00044.html#a34617f3ac0249ca877bddc57f6982401">DBG_MOD</a>, <span class="stringliteral">&quot;end obj file: nbs=%d nbf=%d nbp=%d pt=%d len=%d&quot;</span>, lwo-&gt;<a class="code" href="a01796.html#a2612b153664c3aa7254548fbd840b610">nbs</a>, lwo-&gt;<a class="code" href="a01796.html#a7733c75ab00848918a6afc221c65b48d">nbf</a>, lwo-&gt;<a class="code" href="a01796.html#a839ed231b3caeb71e26dbeb62a3bb825">nbp</a>, lwo-&gt;<a class="code" href="a01796.html#aefc63529644b3564420415bb22e9563c">pt</a>, len);</div>
<div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160; </div>
<div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;  <span class="keywordflow">if</span> (lwo-&gt;<a class="code" href="a01796.html#a7733c75ab00848918a6afc221c65b48d">nbf</a>) {</div>
<div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;    <a class="code" href="a01780.html">HVertex</a> *pv =  lwo-&gt;<a class="code" href="a01796.html#aefc63529644b3564420415bb22e9563c">pt</a>;</div>
<div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;    <span class="keywordflow">for</span> (j=0; j &lt; lwo-&gt;<a class="code" href="a01796.html#a839ed231b3caeb71e26dbeb62a3bb825">nbp</a> ; ++j,++pv)</div>
<div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;      pv-&gt;<a class="code" href="a01780.html#ae69f381d18fda8724b50c2c96c7f4b76">n</a>.<a class="code" href="a01484.html#a7d8399db6cf70277e96bd6f117b9d01f">reset</a>();</div>
<div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;    <a class="code" href="a01788.html">TriFace</a> *pf = lwo-&gt;<a class="code" href="a01796.html#a90bd2e691383db4c0d953e85af46656b">fc</a>;</div>
<div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;    <span class="keywordflow">for</span> (j=0; j &lt; lwo-&gt;<a class="code" href="a01796.html#a7733c75ab00848918a6afc221c65b48d">nbf</a> ; ++j,++pf) {</div>
<div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;      pf-&gt;<a class="code" href="a01788.html#a58a554c146d7c978040203b01a3f7d56">normal</a>();</div>
<div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;      pf-&gt;<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[0]-&gt;<a class="code" href="a01780.html#ae69f381d18fda8724b50c2c96c7f4b76">n</a> += pf-&gt;<a class="code" href="a01788.html#a461e4338613a6f9aada6e08b6debe49f">n</a>;</div>
<div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;      pf-&gt;<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[1]-&gt;<a class="code" href="a01780.html#ae69f381d18fda8724b50c2c96c7f4b76">n</a> += pf-&gt;<a class="code" href="a01788.html#a461e4338613a6f9aada6e08b6debe49f">n</a>;</div>
<div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      pf-&gt;<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[2]-&gt;<a class="code" href="a01780.html#ae69f381d18fda8724b50c2c96c7f4b76">n</a> += pf-&gt;<a class="code" href="a01788.html#a461e4338613a6f9aada6e08b6debe49f">n</a>;</div>
<div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;    }</div>
<div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;    pv = lwo-&gt;<a class="code" href="a01796.html#aefc63529644b3564420415bb22e9563c">pt</a>;</div>
<div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;    <span class="keywordflow">for</span> (j=0; j &lt; lwo-&gt;<a class="code" href="a01796.html#a839ed231b3caeb71e26dbeb62a3bb825">nbp</a> ; ++j,++pv)</div>
<div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;      pv-&gt;<a class="code" href="a01780.html#ae69f381d18fda8724b50c2c96c7f4b76">n</a>.<a class="code" href="a01484.html#a7cc926b7607a92ead837d3d0cfc7a46f">normalize</a>();</div>
<div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;  }</div>
<div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;  <a class="code" href="a01400.html#a293adac2dac5a46a01eada811a6f23f5">File::closeFile</a>(fp);</div>
<div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;  <span class="keywordflow">return</span>;</div>
<div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;}</div>
<div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160; </div>
<div class="line"><a name="l00628"></a><span class="lineno"><a class="line" href="a01788.html#ab9216970864076ab804ce98ee9a07edb">  628</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01788.html#ab9216970864076ab804ce98ee9a07edb">TriFace::put</a>(<span class="keywordtype">int</span> pdata)</div>
<div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;{</div>
<div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;  <a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[0]-&gt;<a class="code" href="a01780.html#a0cc34cdcabcf1d1fdec72ad299f7b089">put</a>(pdata);</div>
<div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;  <a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[1]-&gt;<a class="code" href="a01780.html#a0cc34cdcabcf1d1fdec72ad299f7b089">put</a>(pdata);</div>
<div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;  <a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[2]-&gt;<a class="code" href="a01780.html#a0cc34cdcabcf1d1fdec72ad299f7b089">put</a>(pdata);</div>
<div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;}</div>
<div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160; </div>
<div class="line"><a name="l00635"></a><span class="lineno"><a class="line" href="a01788.html#af801d453c779851182ab0a04daf1a40f">  635</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01788.html#af801d453c779851182ab0a04daf1a40f">TriFace::draw</a>(<span class="keywordtype">int</span> pdata)</div>
<div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;{</div>
<div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;  glBegin(GL_TRIANGLES);</div>
<div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;   <a class="code" href="a01788.html#ab9216970864076ab804ce98ee9a07edb">put</a>(pdata);</div>
<div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;  glEnd();</div>
<div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;}</div>
<div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160; </div>
<div class="line"><a name="l00642"></a><span class="lineno"><a class="line" href="a01796.html#a821f5b25b450fa1acdb3f9c0b5962592">  642</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01796.html#a821f5b25b450fa1acdb3f9c0b5962592">Object::draw</a>()</div>
<div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;{</div>
<div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01796.html#a2612b153664c3aa7254548fbd840b610">nbs</a>) <span class="keywordflow">for</span> (<span class="keywordtype">int</span> j=0; j&lt;<a class="code" href="a01796.html#a2612b153664c3aa7254548fbd840b610">nbs</a> ; ++j) <a class="code" href="a01796.html#ad197f5685958fb0673e531112cb97c5b">sf</a>[j].<a class="code" href="a01796.html#a821f5b25b450fa1acdb3f9c0b5962592">draw</a>(<a class="code" href="a01796.html#aefc63529644b3564420415bb22e9563c">pt</a>);</div>
<div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;}</div>
<div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160; </div>
<div class="line"><a name="l00647"></a><span class="lineno"><a class="line" href="a01784.html#aa737a7723c9b82c3ac72d80062bb8271">  647</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="a01784.html#aa737a7723c9b82c3ac72d80062bb8271">Material::put</a>()</div>
<div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;{</div>
<div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;  <span class="keywordtype">int</span> pdata = <a class="code" href="a00518.html#a0568fed0bd52efb8b1fbc6366cc9f02e">PUT_COORD</a>;</div>
<div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160; </div>
<div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01784.html#a4dc22dce3e39672876a6634af6dbd114">flag</a> &amp; <a class="code" href="a01784.html#a0344b22e141951415e5c66d2142beae5a50254172e5f1e320fdab257daf9cb9db">Smooth</a>) glEnable(GL_SMOOTH);</div>
<div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;  <span class="keywordflow">else</span>               glDisable(GL_SMOOTH);</div>
<div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01784.html#a4dc22dce3e39672876a6634af6dbd114">flag</a> &amp; <a class="code" href="a01784.html#a0344b22e141951415e5c66d2142beae5a34979e08449521720c2eee13a4a9bb78">Double</a>) glDisable(GL_CULL_FACE);</div>
<div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;  <span class="keywordflow">else</span>               glEnable(GL_CULL_FACE);</div>
<div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01784.html#a4dc22dce3e39672876a6634af6dbd114">flag</a> &amp; <a class="code" href="a01784.html#a0344b22e141951415e5c66d2142beae5a7608a9c6bfea3ca3e6d2257640bf6628">Blend</a>) {</div>
<div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;    <span class="keywordflow">if</span> (<a class="code" href="a01784.html#a4dc22dce3e39672876a6634af6dbd114">flag</a> &amp; <a class="code" href="a01784.html#a0344b22e141951415e5c66d2142beae5af333b503ce92de401b8b731ce55ee5b8">Additive</a>) glBlendFunc(GL_SRC_ALPHA,GL_ONE);</div>
<div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;    <span class="keywordflow">else</span>                 glBlendFunc(GL_SRC_ALPHA,GL_ONE_MINUS_SRC_ALPHA);</div>
<div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;    glEnable(GL_BLEND);</div>
<div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;  }</div>
<div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;  <span class="keywordflow">else</span> glDisable(GL_BLEND);</div>
<div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="a01784.html#a4dc22dce3e39672876a6634af6dbd114">flag</a> &amp; <a class="code" href="a01784.html#a0344b22e141951415e5c66d2142beae5aaa69deeb90cac2d36d4bed35777c9863">Lighting</a>) {</div>
<div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;    glMaterialfv(GL_FRONT_AND_BACK,GL_AMBIENT,<a class="code" href="a01784.html#a619e9a47a90b1f2051e0e6bcb32c41a6">ambient</a>.<a class="code" href="a01768.html#a80d882c39104548eb9419f3bf9a7afdc">t</a>);</div>
<div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;    glMaterialfv(GL_FRONT_AND_BACK,GL_DIFFUSE,<a class="code" href="a01784.html#ab390672879ce114b6de6aba246a31392">diffuse</a>.<a class="code" href="a01768.html#a80d882c39104548eb9419f3bf9a7afdc">t</a>);</div>
<div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;    glMaterialfv(GL_FRONT_AND_BACK,GL_SPECULAR,<a class="code" href="a01784.html#a7c14400d73e3915e6121d4712db61e9a">specular</a>.<a class="code" href="a01768.html#a80d882c39104548eb9419f3bf9a7afdc">t</a>);</div>
<div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;    glMaterialfv(GL_FRONT_AND_BACK,GL_EMISSION,<a class="code" href="a01784.html#a38c40dc9e7c0585f213b225210d67908">emission</a>.<a class="code" href="a01768.html#a80d882c39104548eb9419f3bf9a7afdc">t</a>);</div>
<div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;    glMateriali(GL_FRONT_AND_BACK,GL_SHININESS,<a class="code" href="a01784.html#a12d76356d4d322ac01f39cff93e7fc10">shininess</a>);</div>
<div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;    glLightModeli(GL_LIGHT_MODEL_TWO_SIDE,(<a class="code" href="a01784.html#a4dc22dce3e39672876a6634af6dbd114">flag</a> &amp; <a class="code" href="a01784.html#a0344b22e141951415e5c66d2142beae5a34979e08449521720c2eee13a4a9bb78">Double</a>));</div>
<div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;    glEnable(GL_LIGHTING);</div>
<div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;    pdata |= <a class="code" href="a00518.html#af09aa26f1329c226dc2170488133957b">PUT_NORMAL</a>;</div>
<div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;  }</div>
<div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;  <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;    glDisable(GL_LIGHTING);</div>
<div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;    <a class="code" href="a01784.html#a619e9a47a90b1f2051e0e6bcb32c41a6">ambient</a>.<a class="code" href="a01768.html#a2db92b9f29ca6ffcf6ee327411efbade">put</a>();</div>
<div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;  }</div>
<div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;  <span class="keywordflow">return</span> pdata;</div>
<div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;}</div>
<div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160; </div>
<div class="line"><a name="l00678"></a><span class="lineno"><a class="line" href="a01768.html#a2db92b9f29ca6ffcf6ee327411efbade">  678</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01768.html#a2db92b9f29ca6ffcf6ee327411efbade">Color4f::put</a>()</div>
<div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;{</div>
<div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;  glColor4f(<a class="code" href="a01768.html#a8847fbffe7a19883edf391fd6d65e611">r</a>,<a class="code" href="a01768.html#a8c646470c48187666dd1c2229a8176b8">g</a>,<a class="code" href="a01768.html#a327fbb9795c268dbd99614befbde2f75">b</a>,<a class="code" href="a01768.html#a3d576c84cd596acb80d08268ee98101e">a</a>);</div>
<div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;}</div>
<div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160; </div>
<div class="line"><a name="l00683"></a><span class="lineno"><a class="line" href="a01792.html#aabc08091d3b0e1a3f25bfedf3229de33">  683</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01792.html#aabc08091d3b0e1a3f25bfedf3229de33">Surface::draw</a>(<a class="code" href="a01780.html">HVertex</a> *p0)</div>
<div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;{</div>
<div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;  <span class="keywordtype">int</span> pdata = <a class="code" href="a01784.html#aa737a7723c9b82c3ac72d80062bb8271">put</a>(); <span class="comment">// configure material</span></div>
<div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;  <span class="keywordtype">bool</span> array = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160; </div>
<div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;  <span class="keywordflow">if</span> (p0 != NULL) {</div>
<div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;    <span class="keywordflow">switch</span> (pdata) {</div>
<div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="a00518.html#a0568fed0bd52efb8b1fbc6366cc9f02e">PUT_COORD</a>:</div>
<div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;      glInterleavedArrays(GL_V3F, <span class="keyword">sizeof</span>(<a class="code" href="a01780.html">HVertex</a>), ((<a class="code" href="a01780.html">HVertex</a> *)p0)+offsetof(<a class="code" href="a01780.html">HVertex</a>,p));</div>
<div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;      array = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;    <span class="keywordflow">case</span> <a class="code" href="a00518.html#a0568fed0bd52efb8b1fbc6366cc9f02e">PUT_COORD</a>|<a class="code" href="a00518.html#af09aa26f1329c226dc2170488133957b">PUT_NORMAL</a>:</div>
<div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;      glInterleavedArrays(GL_N3F_V3F, <span class="keyword">sizeof</span>(<a class="code" href="a01780.html">HVertex</a>), ((uint8_t*)p0)+offsetof(<a class="code" href="a01780.html">HVertex</a>,n));</div>
<div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;      array = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;      <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;    }</div>
<div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;    <span class="keywordtype">int</span> i;</div>
<div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;    <a class="code" href="a01788.html">TriFace</a> *f;</div>
<div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;    glBegin(GL_TRIANGLES);</div>
<div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;    f = <a class="code" href="a01792.html#ac40c3916e0257ea51763f92394d705ee">fc</a>; i = <a class="code" href="a01792.html#a52f45d05b60ad64ef135fc5853f04405">nbf</a>;</div>
<div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;    <span class="keywordflow">if</span> (array) {</div>
<div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      <span class="keywordflow">while</span> (i--) {</div>
<div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        glArrayElement(f-&gt;<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[0]-p0);</div>
<div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        glArrayElement(f-&gt;<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[1]-p0);</div>
<div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        glArrayElement(f-&gt;<a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[2]-p0);</div>
<div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;        ++f;</div>
<div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;      }</div>
<div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;    }</div>
<div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;    <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;      <span class="keywordflow">while</span> (i--) {</div>
<div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;        f-&gt;<a class="code" href="a01788.html#ab9216970864076ab804ce98ee9a07edb">put</a>(pdata);</div>
<div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;        ++f;</div>
<div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;      }</div>
<div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;    }</div>
<div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;    glEnd();</div>
<div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;  }</div>
<div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;}</div>
<div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160; </div>
<div class="line"><a name="l00721"></a><span class="lineno"><a class="line" href="a01788.html#a58a554c146d7c978040203b01a3f7d56">  721</a></span>&#160;<span class="keywordtype">void</span> <a class="code" href="a01788.html#a58a554c146d7c978040203b01a3f7d56">TriFace::normal</a>()</div>
<div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;{</div>
<div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;  <a class="code" href="a01484.html">Vector3</a> a = <a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[1]-&gt;<a class="code" href="a01780.html#a2670328f4966d09ceb0f4d434d1d9666">p</a> - <a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[0]-&gt;<a class="code" href="a01780.html#a2670328f4966d09ceb0f4d434d1d9666">p</a>;</div>
<div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;  <a class="code" href="a01484.html">Vector3</a> b = <a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[2]-&gt;<a class="code" href="a01780.html#a2670328f4966d09ceb0f4d434d1d9666">p</a> - <a class="code" href="a01788.html#a267997b52ebc24f14f41b9716549e00b">v</a>[0]-&gt;<a class="code" href="a01780.html#a2670328f4966d09ceb0f4d434d1d9666">p</a>;</div>
<div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;  <a class="code" href="a01788.html#a461e4338613a6f9aada6e08b6debe49f">n</a>.<a class="code" href="a01484.html#af9b3548c3d8933ddcf7a060e2cb05fd0">crossProduct</a>(a, b);</div>
<div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;  <a class="code" href="a01788.html#a461e4338613a6f9aada6e08b6debe49f">n</a>.<a class="code" href="a01484.html#a7cc926b7607a92ead837d3d0cfc7a46f">normalize</a>();</div>
<div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;}</div>
<div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160; </div>
<div class="line"><a name="l00729"></a><span class="lineno"><a class="line" href="a01796.html#ae8a9c090c17fb126e730031d18d4ea67">  729</a></span>&#160;<a class="code" href="a01792.html">Surface</a> * <a class="code" href="a01796.html#ae8a9c090c17fb126e730031d18d4ea67">Object::findSurface</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> *name)</div>
<div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;{</div>
<div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;  <a class="code" href="a01792.html">Surface</a> *ps = <a class="code" href="a01796.html#ad197f5685958fb0673e531112cb97c5b">sf</a>;</div>
<div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">int</span> s=0; s&lt;<a class="code" href="a01796.html#a2612b153664c3aa7254548fbd840b610">nbs</a> ; s++, ps++)</div>
<div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;    <span class="keywordflow">if</span> (! <a class="code" href="a00176.html#a706b36f3a672f84685576723c3928baa">strcasecmp</a>(ps-&gt;<a class="code" href="a01784.html#a26e3aef06c23cfe058ac7671d91593e0">name</a>, name)) <span class="keywordflow">return</span> ps;</div>
<div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;  <span class="keywordflow">return</span> NULL;</div>
<div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aa00518_html_a4c89e2864261ce498edaeb99be49f754"><div class="ttname"><a href="a00518.html#a4c89e2864261ce498edaeb99be49f754">NBHAIR</a></div><div class="ttdeci">#define NBHAIR</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00032">hairs.hpp:32</a></div></div>
<div class="ttc" id="aa01900_html_ad334680b0147887f5117ac586aa8cce8"><div class="ttname"><a href="a01900.html#ad334680b0147887f5117ac586aa8cce8">Parse::parseFloat</a></div><div class="ttdeci">virtual char * parseFloat(char *ptok, float *value)</div><div class="ttdoc">Returns a float.</div><div class="ttdef"><b>Definition:</b> <a href="a00635_source.html#l00890">parse.cpp:890</a></div></div>
<div class="ttc" id="aa01784_html_a0344b22e141951415e5c66d2142beae5af333b503ce92de401b8b731ce55ee5b8"><div class="ttname"><a href="a01784.html#a0344b22e141951415e5c66d2142beae5af333b503ce92de401b8b731ce55ee5b8">Material::Additive</a></div><div class="ttdeci">@ Additive</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00098">hairs.hpp:97</a></div></div>
<div class="ttc" id="aa02100_html_a0f67acb27addc553b7feb65c13bcda33"><div class="ttname"><a href="a02100.html#a0f67acb27addc553b7feb65c13bcda33">Pos::x</a></div><div class="ttdeci">float x</div><div class="ttdoc">x absolute position.</div><div class="ttdef"><b>Definition:</b> <a href="a00866_source.html#l00092">wobject.hpp:92</a></div></div>
<div class="ttc" id="aa01796_html_a8082d05379c1b91bc5d6b014e54049ba"><div class="ttname"><a href="a01796.html#a8082d05379c1b91bc5d6b014e54049ba">Object::scal</a></div><div class="ttdeci">float scal</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00141">hairs.hpp:141</a></div></div>
<div class="ttc" id="aa01808_html_ade1756da0b198dcf77e55f9bfe72349e"><div class="ttname"><a href="a01808.html#ade1756da0b198dcf77e55f9bfe72349e">Hair::o</a></div><div class="ttdeci">Object * o</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00179">hairs.hpp:179</a></div></div>
<div class="ttc" id="aa01808_html_ace5e2d8c5f8b4c3a009b3e99dfe277d9"><div class="ttname"><a href="a01808.html#ace5e2d8c5f8b4c3a009b3e99dfe277d9">Hair::draw</a></div><div class="ttdeci">void draw()</div><div class="ttdoc">Draws hair.</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00179">hairs.cpp:179</a></div></div>
<div class="ttc" id="aa01178_html"><div class="ttname"><a href="a01178.html">lwo.hpp</a></div></div>
<div class="ttc" id="aa02108_html_ae3a41c24e16343f3dbc926da1ac3f106"><div class="ttname"><a href="a02108.html#ae3a41c24e16343f3dbc926da1ac3f106">WObject::parse</a></div><div class="ttdeci">virtual Parse * parse()</div><div class="ttdoc">Gets current parse.</div><div class="ttdef"><b>Definition:</b> <a href="a00863_source.html#l00873">wobject.cpp:873</a></div></div>
<div class="ttc" id="aa02108_html_a531b1401e6632568550a231210d24ba9"><div class="ttname"><a href="a02108.html#a531b1401e6632568550a231210d24ba9">WObject::initializeMobileObject</a></div><div class="ttdeci">virtual void initializeMobileObject(float last)</div><div class="ttdef"><b>Definition:</b> <a href="a00863_source.html#l00180">wobject.cpp:180</a></div></div>
<div class="ttc" id="aa01784_html_a0344b22e141951415e5c66d2142beae5a50254172e5f1e320fdab257daf9cb9db"><div class="ttname"><a href="a01784.html#a0344b22e141951415e5c66d2142beae5a50254172e5f1e320fdab257daf9cb9db">Material::Smooth</a></div><div class="ttdeci">@ Smooth</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00093">hairs.hpp:93</a></div></div>
<div class="ttc" id="aa01424_html_a2377f200b0ea62979bcd36362f7eaff3"><div class="ttname"><a href="a01424.html#a2377f200b0ea62979bcd36362f7eaff3">Http::httpOpen</a></div><div class="ttdeci">static int httpOpen(const char *url, void(*httpReader)(void *h, Http *httpio), void *hdl, int _thread)</div><div class="ttdoc">Opens an url and gives which reader to use and tells whether the connection is threaded or not.</div><div class="ttdef"><b>Definition:</b> <a href="a00035_source.html#l00465">http.cpp:465</a></div></div>
<div class="ttc" id="aa01808_html_a0211ac0e296dfb31905d73900f2804e0"><div class="ttname"><a href="a01808.html#a0211ac0e296dfb31905d73900f2804e0">Hair::ln</a></div><div class="ttdeci">Line ln[NBHAIR]</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00183">hairs.hpp:183</a></div></div>
<div class="ttc" id="aa00518_html_a02a3534250726e0cd83c7bc111677886"><div class="ttname"><a href="a00518.html#a02a3534250726e0cd83c7bc111677886">HAIRGRAVITY</a></div><div class="ttdeci">#define HAIRGRAVITY</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00042">hairs.hpp:42</a></div></div>
<div class="ttc" id="aa00638_html_a375cf0543a2d6b2a1f9745608c8ead2c"><div class="ttname"><a href="a00638.html#a375cf0543a2d6b2a1f9745608c8ead2c">begin_while_parse</a></div><div class="ttdeci">#define begin_while_parse(l)</div><div class="ttdef"><b>Definition:</b> <a href="a00638_source.html#l00030">parse.hpp:30</a></div></div>
<div class="ttc" id="aa01892_html"><div class="ttname"><a href="a01892.html">OClass</a></div><div class="ttdoc">OClass Class.</div><div class="ttdef"><b>Definition:</b> <a href="a00626_source.html#l00037">oclass.hpp:37</a></div></div>
<div class="ttc" id="aa01792_html"><div class="ttname"><a href="a01792.html">Surface</a></div><div class="ttdoc">Surface class.</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00122">hairs.hpp:122</a></div></div>
<div class="ttc" id="aa01808_html_a8291f0a200a7273098327fe0c28ae2af"><div class="ttname"><a href="a01808.html#a8291f0a200a7273098327fe0c28ae2af">Hair::init</a></div><div class="ttdeci">void init(Object *o, Surface *s, float scale)</div><div class="ttdoc">Constructor.</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00102">hairs.cpp:102</a></div></div>
<div class="ttc" id="aa01788_html_a6f49ce3313b38196603917bd7c0cbf4a"><div class="ttname"><a href="a01788.html#a6f49ce3313b38196603917bd7c0cbf4a">TriFace::m</a></div><div class="ttdeci">Material * m</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00112">hairs.hpp:112</a></div></div>
<div class="ttc" id="aa01796_html_ad197f5685958fb0673e531112cb97c5b"><div class="ttname"><a href="a01796.html#ad197f5685958fb0673e531112cb97c5b">Object::sf</a></div><div class="ttdeci">Surface * sf</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00140">hairs.hpp:140</a></div></div>
<div class="ttc" id="aa00827_html_a77e49fc0956d412a05337460c7778c6d"><div class="ttname"><a href="a00827.html#a77e49fc0956d412a05337460c7778c6d">first</a></div><div class="ttdeci">static bool first</div><div class="ttdef"><b>Definition:</b> <a href="a00827_source.html#l00047">water.cpp:47</a></div></div>
<div class="ttc" id="aa01796_html_a821f5b25b450fa1acdb3f9c0b5962592"><div class="ttname"><a href="a01796.html#a821f5b25b450fa1acdb3f9c0b5962592">Object::draw</a></div><div class="ttdeci">void draw()</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00642">hairs.cpp:642</a></div></div>
<div class="ttc" id="aa02096_html_a73932a7bf32fcb6b0550faa3197acc22"><div class="ttname"><a href="a02096.html#a73932a7bf32fcb6b0550faa3197acc22">Names::url</a></div><div class="ttdeci">char url[URL_LEN]</div><div class="ttdoc">url.</div><div class="ttdef"><b>Definition:</b> <a href="a00866_source.html#l00081">wobject.hpp:81</a></div></div>
<div class="ttc" id="aa01792_html_a6076a78e42013470dddcc63441bcc818"><div class="ttname"><a href="a01792.html#a6076a78e42013470dddcc63441bcc818">Surface::diffuse</a></div><div class="ttdeci">float diffuse</div><div class="ttdoc">diffuse</div><div class="ttdef"><b>Definition:</b> <a href="a01163_source.html#l00091">dxf.hpp:91</a></div></div>
<div class="ttc" id="aa01484_html_abab0747838189d9a41f37fdcafa9fce0"><div class="ttname"><a href="a01484.html#abab0747838189d9a41f37fdcafa9fce0">Vector3::length2</a></div><div class="ttdeci">float length2()</div><div class="ttdoc">Returns the squared length of this vector.</div><div class="ttdef"><b>Definition:</b> <a href="a00137_source.html#l00165">vector3.hpp:165</a></div></div>
<div class="ttc" id="aa01484_html_a86eb35a9fa2d5a49e7fad66a35fa9c13"><div class="ttname"><a href="a01484.html#a86eb35a9fa2d5a49e7fad66a35fa9c13">Vector3::y</a></div><div class="ttdeci">float y</div><div class="ttdef"><b>Definition:</b> <a href="a00137_source.html#l00033">vector3.hpp:33</a></div></div>
<div class="ttc" id="aa01808_html_a15f9f8a6181ee87be70512fb9ba99cab"><div class="ttname"><a href="a01808.html#a15f9f8a6181ee87be70512fb9ba99cab">Hair::m</a></div><div class="ttdeci">Material m</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00181">hairs.hpp:181</a></div></div>
<div class="ttc" id="aa00518_html_a10928b19b03ed9d99049815355bb20a5"><div class="ttname"><a href="a00518.html#a10928b19b03ed9d99049815355bb20a5">FROT</a></div><div class="ttdeci">#define FROT</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00041">hairs.hpp:41</a></div></div>
<div class="ttc" id="aa01788_html_af801d453c779851182ab0a04daf1a40f"><div class="ttname"><a href="a01788.html#af801d453c779851182ab0a04daf1a40f">TriFace::draw</a></div><div class="ttdeci">void draw(int pdata)</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00635">hairs.cpp:635</a></div></div>
<div class="ttc" id="aa01400_html_a293adac2dac5a46a01eada811a6f23f5"><div class="ttname"><a href="a01400.html#a293adac2dac5a46a01eada811a6f23f5">File::closeFile</a></div><div class="ttdeci">static void closeFile(FILE *f)</div><div class="ttdef"><b>Definition:</b> <a href="a00023_source.html#l00036">file.cpp:36</a></div></div>
<div class="ttc" id="aa01784_html_a26e3aef06c23cfe058ac7671d91593e0"><div class="ttname"><a href="a01784.html#a26e3aef06c23cfe058ac7671d91593e0">Material::name</a></div><div class="ttdeci">char name[16]</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00102">hairs.hpp:102</a></div></div>
<div class="ttc" id="aa01768_html_a8c646470c48187666dd1c2229a8176b8"><div class="ttname"><a href="a01768.html#a8c646470c48187666dd1c2229a8176b8">Color4f::g</a></div><div class="ttdeci">float g</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00060">hairs.hpp:60</a></div></div>
<div class="ttc" id="aa01808_html"><div class="ttname"><a href="a01808.html">Hair</a></div><div class="ttdoc">CHair class.</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00177">hairs.hpp:177</a></div></div>
<div class="ttc" id="aa01768_html_a327fbb9795c268dbd99614befbde2f75"><div class="ttname"><a href="a01768.html#a327fbb9795c268dbd99614befbde2f75">Color4f::b</a></div><div class="ttdeci">float b</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00060">hairs.hpp:60</a></div></div>
<div class="ttc" id="aa01768_html_a8847fbffe7a19883edf391fd6d65e611"><div class="ttname"><a href="a01768.html#a8847fbffe7a19883edf391fd6d65e611">Color4f::r</a></div><div class="ttdeci">float r</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00060">hairs.hpp:60</a></div></div>
<div class="ttc" id="aa01484_html_aa8c9461eb24bd2c364258078811a3e9d"><div class="ttname"><a href="a01484.html#aa8c9461eb24bd2c364258078811a3e9d">Vector3::z</a></div><div class="ttdeci">float z</div><div class="ttdef"><b>Definition:</b> <a href="a00137_source.html#l00034">vector3.hpp:34</a></div></div>
<div class="ttc" id="aa01812_html_a382a2fb6ad5fed12522fe5585cc27dd0"><div class="ttname"><a href="a01812.html#a382a2fb6ad5fed12522fe5585cc27dd0">Hairs::scale</a></div><div class="ttdeci">float scale</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00213">hairs.hpp:213</a></div></div>
<div class="ttc" id="aa02108_html"><div class="ttname"><a href="a02108.html">WObject</a></div><div class="ttdoc">WObject Class.</div><div class="ttdef"><b>Definition:</b> <a href="a00866_source.html#l00126">wobject.hpp:126</a></div></div>
<div class="ttc" id="aa00518_html_a0568fed0bd52efb8b1fbc6366cc9f02e"><div class="ttname"><a href="a00518.html#a0568fed0bd52efb8b1fbc6366cc9f02e">PUT_COORD</a></div><div class="ttdeci">#define PUT_COORD</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00047">hairs.hpp:47</a></div></div>
<div class="ttc" id="aa01424_html"><div class="ttname"><a href="a01424.html">Http</a></div><div class="ttdoc">Http Class I/O methods.</div><div class="ttdef"><b>Definition:</b> <a href="a00038_source.html#l00118">http.hpp:118</a></div></div>
<div class="ttc" id="aa01804_html_a0ca202cd13b78fadae5e473df1fbc471"><div class="ttname"><a href="a01804.html#a0ca202cd13b78fadae5e473df1fbc471">Line::pt</a></div><div class="ttdeci">Node pt[HAIRSIZE]</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00167">hairs.hpp:167</a></div></div>
<div class="ttc" id="aa01788_html_ab9216970864076ab804ce98ee9a07edb"><div class="ttname"><a href="a01788.html#ab9216970864076ab804ce98ee9a07edb">TriFace::put</a></div><div class="ttdeci">void put(int pdata)</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00628">hairs.cpp:628</a></div></div>
<div class="ttc" id="aa01812_html_a0cec7a7aa012b6583b98f9464f72f318"><div class="ttname"><a href="a01812.html#a0cec7a7aa012b6583b98f9464f72f318">Hairs::posh</a></div><div class="ttdeci">Vector3 posh</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00214">hairs.hpp:214</a></div></div>
<div class="ttc" id="aa01768_html_a2db92b9f29ca6ffcf6ee327411efbade"><div class="ttname"><a href="a01768.html#a2db92b9f29ca6ffcf6ee327411efbade">Color4f::put</a></div><div class="ttdeci">void put()</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00678">hairs.cpp:678</a></div></div>
<div class="ttc" id="aa00518_html_af09aa26f1329c226dc2170488133957b"><div class="ttname"><a href="a00518.html#af09aa26f1329c226dc2170488133957b">PUT_NORMAL</a></div><div class="ttdeci">#define PUT_NORMAL</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00048">hairs.hpp:48</a></div></div>
<div class="ttc" id="aa01792_html_ab667b997cce3d2d28078c589eec3f42e"><div class="ttname"><a href="a01792.html#ab667b997cce3d2d28078c589eec3f42e">Surface::specular</a></div><div class="ttdeci">float specular</div><div class="ttdoc">specular RGB</div><div class="ttdef"><b>Definition:</b> <a href="a01163_source.html#l00093">dxf.hpp:93</a></div></div>
<div class="ttc" id="aa01784_html_aa737a7723c9b82c3ac72d80062bb8271"><div class="ttname"><a href="a01784.html#aa737a7723c9b82c3ac72d80062bb8271">Material::put</a></div><div class="ttdeci">int put()</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00647">hairs.cpp:647</a></div></div>
<div class="ttc" id="aa01812_html_ab412763f59de9db113b223bab9299195"><div class="ttname"><a href="a01812.html#ab412763f59de9db113b223bab9299195">Hairs::affobj</a></div><div class="ttdeci">bool affobj</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00211">hairs.hpp:211</a></div></div>
<div class="ttc" id="aa01788_html_a461e4338613a6f9aada6e08b6debe49f"><div class="ttname"><a href="a01788.html#a461e4338613a6f9aada6e08b6debe49f">TriFace::n</a></div><div class="ttdeci">Vector3 n</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00111">hairs.hpp:111</a></div></div>
<div class="ttc" id="aa01384_html_a35f7344ad44f891b909bcf7c31e276ca"><div class="ttname"><a href="a01384.html#a35f7344ad44f891b909bcf7c31e276ca">Cache::openCache</a></div><div class="ttdeci">static FILE * openCache(const char *url, Http *http)</div><div class="ttdoc">Saves file into cache and opens it.</div><div class="ttdef"><b>Definition:</b> <a href="a00002_source.html#l00064">cache.cpp:64</a></div></div>
<div class="ttc" id="aa01812_html_a68ccd4796e6d3da12282fa70d5a5defa"><div class="ttname"><a href="a01812.html#a68ccd4796e6d3da12282fa70d5a5defa">Hairs::creator</a></div><div class="ttdeci">static WObject *() creator(char *l)</div><div class="ttdoc">Creates from fileline.</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00037">hairs.cpp:37</a></div></div>
<div class="ttc" id="aa01780_html"><div class="ttname"><a href="a01780.html">HVertex</a></div><div class="ttdoc">HVertex class.</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00073">hairs.hpp:73</a></div></div>
<div class="ttc" id="aa01788_html_a267997b52ebc24f14f41b9716549e00b"><div class="ttname"><a href="a01788.html#a267997b52ebc24f14f41b9716549e00b">TriFace::v</a></div><div class="ttdeci">HVertex * v[3]</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00110">hairs.hpp:110</a></div></div>
<div class="ttc" id="aa00038_html"><div class="ttname"><a href="a00038.html">http.hpp</a></div></div>
<div class="ttc" id="aa01784_html_a619e9a47a90b1f2051e0e6bcb32c41a6"><div class="ttname"><a href="a01784.html#a619e9a47a90b1f2051e0e6bcb32c41a6">Material::ambient</a></div><div class="ttdeci">Color4f ambient</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00086">hairs.hpp:86</a></div></div>
<div class="ttc" id="aa01784_html_a0344b22e141951415e5c66d2142beae5a34979e08449521720c2eee13a4a9bb78"><div class="ttname"><a href="a01784.html#a0344b22e141951415e5c66d2142beae5a34979e08449521720c2eee13a4a9bb78">Material::Double</a></div><div class="ttdeci">@ Double</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00094">hairs.hpp:94</a></div></div>
<div class="ttc" id="aa01804_html"><div class="ttname"><a href="a01804.html">Line</a></div><div class="ttdoc">Line class.</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00164">hairs.hpp:164</a></div></div>
<div class="ttc" id="aa00113_html"><div class="ttname"><a href="a00113.html">timer.hpp</a></div></div>
<div class="ttc" id="aa01812_html_a85d838982d4ceb7b1b130df44de63e4e"><div class="ttname"><a href="a01812.html#a85d838982d4ceb7b1b130df44de63e4e">Hairs::pos0</a></div><div class="ttdeci">Vector3 pos0</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00214">hairs.hpp:214</a></div></div>
<div class="ttc" id="aa00047_html_ae379a37781a90a61d1bb93aa8b41e05e"><div class="ttname"><a href="a00047.html#ae379a37781a90a61d1bb93aa8b41e05e">SWAPS</a></div><div class="ttdeci">#define SWAPS(x, n)</div><div class="ttdef"><b>Definition:</b> <a href="a00047_source.html#l00045">macros.hpp:45</a></div></div>
<div class="ttc" id="aa02604_html"><div class="ttname"><a href="a02604.html">Lwo</a></div><div class="ttdoc">Lwo class.</div><div class="ttdef"><b>Definition:</b> <a href="a01178_source.html#l00060">lwo.hpp:60</a></div></div>
<div class="ttc" id="aa01400_html_ab4b0b1135bc883b72a26bf186c369f84"><div class="ttname"><a href="a01400.html#ab4b0b1135bc883b72a26bf186c369f84">File::littleEndian</a></div><div class="ttdeci">static bool littleEndian()</div><div class="ttdoc">check that this machine is little endian return 1 if little endian else 0 if big endian</div><div class="ttdef"><b>Definition:</b> <a href="a00023_source.html#l00061">file.cpp:61</a></div></div>
<div class="ttc" id="aa01784_html_a7c14400d73e3915e6121d4712db61e9a"><div class="ttname"><a href="a01784.html#a7c14400d73e3915e6121d4712db61e9a">Material::specular</a></div><div class="ttdeci">Color4f specular</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00088">hairs.hpp:88</a></div></div>
<div class="ttc" id="aa01812_html_a354edee99358ddac9ba8e1fb3f4bb453"><div class="ttname"><a href="a01812.html#a354edee99358ddac9ba8e1fb3f4bb453">Hairs::pos1</a></div><div class="ttdeci">Vector3 pos1</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00214">hairs.hpp:214</a></div></div>
<div class="ttc" id="aa01768_html_a80d882c39104548eb9419f3bf9a7afdc"><div class="ttname"><a href="a01768.html#a80d882c39104548eb9419f3bf9a7afdc">Color4f::t</a></div><div class="ttdeci">float t[4]</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00061">hairs.hpp:61</a></div></div>
<div class="ttc" id="aa01796_html_a40860402e64d8008fb42329df7097cdb"><div class="ttname"><a href="a01796.html#a40860402e64d8008fb42329df7097cdb">Object::Object</a></div><div class="ttdeci">Object()</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00310">hairs.cpp:310</a></div></div>
<div class="ttc" id="aa02108_html_a0bbccb546fc10f1f5d5ad606f8ab1feca63421033bcb770b36205db40d4cdf507"><div class="ttname"><a href="a02108.html#a0bbccb546fc10f1f5d5ad606f8ab1feca63421033bcb770b36205db40d4cdf507">WObject::RENDER_HIGH</a></div><div class="ttdeci">@ RENDER_HIGH</div><div class="ttdef"><b>Definition:</b> <a href="a00866_source.html#l00187">wobject.hpp:186</a></div></div>
<div class="ttc" id="aa02108_html_a0467a0f9bfe81bd0d17c85e97cc3f515"><div class="ttname"><a href="a02108.html#a0467a0f9bfe81bd0d17c85e97cc3f515">WObject::urlName</a></div><div class="ttdeci">virtual const char * urlName() const</div><div class="ttdoc">Gets names.url.</div><div class="ttdef"><b>Definition:</b> <a href="a00863_source.html#l00332">wobject.cpp:332</a></div></div>
<div class="ttc" id="aa02100_html_a324bca33a4f315ca6ddabd8c83362d62"><div class="ttname"><a href="a02100.html#a324bca33a4f315ca6ddabd8c83362d62">Pos::z</a></div><div class="ttdeci">float z</div><div class="ttdoc">z absolute position.</div><div class="ttdef"><b>Definition:</b> <a href="a00866_source.html#l00094">wobject.hpp:94</a></div></div>
<div class="ttc" id="aa00005_html"><div class="ttname"><a href="a00005.html">cache.hpp</a></div></div>
<div class="ttc" id="aa01796_html_ae8f5483f459e46687bd01e6f9977afd3"><div class="ttname"><a href="a01796.html#ae8f5483f459e46687bd01e6f9977afd3">Object::~Object</a></div><div class="ttdeci">~Object()</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00318">hairs.cpp:318</a></div></div>
<div class="ttc" id="aa01808_html_a2a2e130ecabc68b7cc08fcd0e7125823"><div class="ttname"><a href="a01808.html#a2a2e130ecabc68b7cc08fcd0e7125823">Hair::c</a></div><div class="ttdeci">Color4f c[HAIRNCOLOR]</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00182">hairs.hpp:182</a></div></div>
<div class="ttc" id="aa01812_html_a0e44e957e9a1cc4176b99c294d457693"><div class="ttname"><a href="a01812.html#a0e44e957e9a1cc4176b99c294d457693">Hairs::parser</a></div><div class="ttdeci">virtual void parser(char *l)</div><div class="ttdoc">Parses.</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00050">hairs.cpp:50</a></div></div>
<div class="ttc" id="aa01796_html_ae8a9c090c17fb126e730031d18d4ea67"><div class="ttname"><a href="a01796.html#ae8a9c090c17fb126e730031d18d4ea67">Object::findSurface</a></div><div class="ttdeci">Surface * findSurface(const char *name)</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00729">hairs.cpp:729</a></div></div>
<div class="ttc" id="aa00866_html_a2a11c2c2bd54baf5dbc068baff05ef01"><div class="ttname"><a href="a00866.html#a2a11c2c2bd54baf5dbc068baff05ef01">NO_ELEMENTARY_MOVE</a></div><div class="ttdeci">#define NO_ELEMENTARY_MOVE</div><div class="ttdef"><b>Definition:</b> <a href="a00866_source.html#l00031">wobject.hpp:31</a></div></div>
<div class="ttc" id="aa00518_html_abea75653d21f6d50d82ad16632b7d0c0"><div class="ttname"><a href="a00518.html#abea75653d21f6d50d82ad16632b7d0c0">LENGTH2</a></div><div class="ttdeci">#define LENGTH2</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00036">hairs.hpp:36</a></div></div>
<div class="ttc" id="aa01812_html_a32f96585f466c7e46ef4cbcf4572920e"><div class="ttname"><a href="a01812.html#a32f96585f466c7e46ef4cbcf4572920e">Hairs::angle</a></div><div class="ttdeci">float angle</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00212">hairs.hpp:212</a></div></div>
<div class="ttc" id="aa00518_html"><div class="ttname"><a href="a00518.html">hairs.hpp</a></div></div>
<div class="ttc" id="aa01812_html_a087fff004e9f9b8774dea37566bb4e61"><div class="ttname"><a href="a01812.html#a087fff004e9f9b8774dea37566bb4e61">Hairs::objchanged</a></div><div class="ttdeci">bool objchanged</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00210">hairs.hpp:210</a></div></div>
<div class="ttc" id="aa00866_html_a96d00b8d15c7c194d97ce2adb930010a"><div class="ttname"><a href="a00866.html#a96d00b8d15c7c194d97ce2adb930010a">SPECIFIC_RENDER</a></div><div class="ttdeci">#define SPECIFIC_RENDER</div><div class="ttdef"><b>Definition:</b> <a href="a00866_source.html#l00035">wobject.hpp:35</a></div></div>
<div class="ttc" id="aa00041_html_a647a2785dc1cd0a8958a10822581e821"><div class="ttname"><a href="a00041.html#a647a2785dc1cd0a8958a10822581e821">error</a></div><div class="ttdeci">void error(const char *s,...)</div><div class="ttdef"><b>Definition:</b> <a href="a00041_source.html#l00100">log.cpp:100</a></div></div>
<div class="ttc" id="aa00176_html_a706b36f3a672f84685576723c3928baa"><div class="ttname"><a href="a00176.html#a706b36f3a672f84685576723c3928baa">strcasecmp</a></div><div class="ttdeci">int strcasecmp(const char *s1, const char *s2)</div><div class="ttdef"><b>Definition:</b> <a href="a00176_source.html#l00102">str.cpp:102</a></div></div>
<div class="ttc" id="aa00515_html_a106ebc4b822f29d77873b4b2b1b9617e"><div class="ttname"><a href="a00515.html#a106ebc4b822f29d77873b4b2b1b9617e">hairs</a></div><div class="ttdeci">static Hairs * hairs</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00029">hairs.cpp:29</a></div></div>
<div class="ttc" id="aa02108_html_ab6046635b34c0784c97b8e734dbe99dd"><div class="ttname"><a href="a02108.html#ab6046635b34c0784c97b8e734dbe99dd">WObject::names</a></div><div class="ttdeci">Names names</div><div class="ttdoc">names.</div><div class="ttdef"><b>Definition:</b> <a href="a00866_source.html#l00141">wobject.hpp:141</a></div></div>
<div class="ttc" id="aa01784_html_ab390672879ce114b6de6aba246a31392"><div class="ttname"><a href="a01784.html#ab390672879ce114b6de6aba246a31392">Material::diffuse</a></div><div class="ttdeci">Color4f diffuse</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00087">hairs.hpp:87</a></div></div>
<div class="ttc" id="aa00518_html_adeaa69e65cde37c77d5400eaadd204d8"><div class="ttname"><a href="a00518.html#adeaa69e65cde37c77d5400eaadd204d8">HAIRNCOLOR</a></div><div class="ttdeci">#define HAIRNCOLOR</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00035">hairs.hpp:35</a></div></div>
<div class="ttc" id="aa01484_html_a7d8399db6cf70277e96bd6f117b9d01f"><div class="ttname"><a href="a01484.html#a7d8399db6cf70277e96bd6f117b9d01f">Vector3::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdoc">Reset variables to a normal zero constant.</div><div class="ttdef"><b>Definition:</b> <a href="a00137_source.html#l00184">vector3.hpp:184</a></div></div>
<div class="ttc" id="aa02108_html_ab69de269d7512c2fcad2f34d3160442d"><div class="ttname"><a href="a02108.html#ab69de269d7512c2fcad2f34d3160442d">WObject::enableBehavior</a></div><div class="ttdeci">virtual void enableBehavior(uint32_t flag)</div><div class="ttdoc">Enables behavior.</div><div class="ttdef"><b>Definition:</b> <a href="a00863_source.html#l00199">wobject.cpp:199</a></div></div>
<div class="ttc" id="aa01796_html"><div class="ttname"><a href="a01796.html">Object</a></div><div class="ttdoc">Object class.</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00135">hairs.hpp:135</a></div></div>
<div class="ttc" id="aa01804_html_ae07a4cb9f3369c39b46170927d887763"><div class="ttname"><a href="a01804.html#ae07a4cb9f3369c39b46170927d887763">Line::draw</a></div><div class="ttdeci">void draw(int pdata)</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00161">hairs.cpp:161</a></div></div>
<div class="ttc" id="aa01812_html_ae0a53ae4a61a95bf8f2d21c59a9fd117"><div class="ttname"><a href="a01812.html#ae0a53ae4a61a95bf8f2d21c59a9fd117">Hairs::obj</a></div><div class="ttdeci">Object * obj</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00207">hairs.hpp:207</a></div></div>
<div class="ttc" id="aa01804_html_a58e1b8f21b8ff1c5542aa8f853b2eff5"><div class="ttname"><a href="a01804.html#a58e1b8f21b8ff1c5542aa8f853b2eff5">Line::n</a></div><div class="ttdeci">Vector3 n</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00166">hairs.hpp:166</a></div></div>
<div class="ttc" id="aa01780_html_ae69f381d18fda8724b50c2c96c7f4b76"><div class="ttname"><a href="a01780.html#ae69f381d18fda8724b50c2c96c7f4b76">HVertex::n</a></div><div class="ttdeci">Vector3 n</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00075">hairs.hpp:75</a></div></div>
<div class="ttc" id="aa00026_html"><div class="ttname"><a href="a00026.html">file.hpp</a></div></div>
<div class="ttc" id="aa01812_html_aa29f9ff49da875e9536a553d989a973b"><div class="ttname"><a href="a01812.html#aa29f9ff49da875e9536a553d989a973b">Hairs::quit</a></div><div class="ttdeci">virtual void quit()</div><div class="ttdoc">Makes all thing when leaving the object.</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00299">hairs.cpp:299</a></div></div>
<div class="ttc" id="aa01768_html_a3d576c84cd596acb80d08268ee98101e"><div class="ttname"><a href="a01768.html#a3d576c84cd596acb80d08268ee98101e">Color4f::a</a></div><div class="ttdeci">float a</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00060">hairs.hpp:60</a></div></div>
<div class="ttc" id="aa00866_html_a13395521c80d491897720252244cd753"><div class="ttname"><a href="a00866.html#a13395521c80d491897720252244cd753">COLLIDE_NEVER</a></div><div class="ttdeci">#define COLLIDE_NEVER</div><div class="ttdef"><b>Definition:</b> <a href="a00866_source.html#l00045">wobject.hpp:45</a></div></div>
<div class="ttc" id="aa01800_html_aa1c2f1c6695d5088e1c80c4a5ecacd26"><div class="ttname"><a href="a01800.html#aa1c2f1c6695d5088e1c80c4a5ecacd26">Node::p</a></div><div class="ttdeci">Vector3 p</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00155">hairs.hpp:155</a></div></div>
<div class="ttc" id="aa00176_html_af4abc8b6ec5c091297406f51429abbde"><div class="ttname"><a href="a00176.html#af4abc8b6ec5c091297406f51429abbde">stringcmp</a></div><div class="ttdeci">int stringcmp(const char *s1, const char *s2)</div><div class="ttdef"><b>Definition:</b> <a href="a00176_source.html#l00148">str.cpp:148</a></div></div>
<div class="ttc" id="aa01792_html_ac40c3916e0257ea51763f92394d705ee"><div class="ttname"><a href="a01792.html#ac40c3916e0257ea51763f92394d705ee">Surface::fc</a></div><div class="ttdeci">TriFace * fc</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00126">hairs.hpp:126</a></div></div>
<div class="ttc" id="aa01780_html_a0cc34cdcabcf1d1fdec72ad299f7b089"><div class="ttname"><a href="a01780.html#a0cc34cdcabcf1d1fdec72ad299f7b089">HVertex::put</a></div><div class="ttdeci">void put(int pdata)</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00326">hairs.cpp:326</a></div></div>
<div class="ttc" id="aa01796_html_a839ed231b3caeb71e26dbeb62a3bb825"><div class="ttname"><a href="a01796.html#a839ed231b3caeb71e26dbeb62a3bb825">Object::nbp</a></div><div class="ttdeci">int nbp</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00137">hairs.hpp:137</a></div></div>
<div class="ttc" id="aa01788_html"><div class="ttname"><a href="a01788.html">TriFace</a></div><div class="ttdoc">TriFace class.</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00108">hairs.hpp:108</a></div></div>
<div class="ttc" id="aa01812_html_a9d5973ddab5af02f9598bc9e4307efa3"><div class="ttname"><a href="a01812.html#a9d5973ddab5af02f9598bc9e4307efa3">Hairs::oclass</a></div><div class="ttdeci">static const OClass oclass</div><div class="ttdoc">class variable.</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00217">hairs.hpp:217</a></div></div>
<div class="ttc" id="aa01812_html_ad42eda83f3be67e2d10593e841951460"><div class="ttname"><a href="a01812.html#ad42eda83f3be67e2d10593e841951460">Hairs::loader</a></div><div class="ttdeci">virtual bool loader(const char *url, float scale)</div><div class="ttdoc">Loader LWO model.</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00083">hairs.cpp:83</a></div></div>
<div class="ttc" id="aa01812_html_a641c296daf1c1cd7349d738f526c73c1"><div class="ttname"><a href="a01812.html#a641c296daf1c1cd7349d738f526c73c1">Hairs::render</a></div><div class="ttdeci">virtual void render()</div><div class="ttdoc">Makes special rendering.</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00235">hairs.cpp:235</a></div></div>
<div class="ttc" id="aa01812_html_a8a6b834a28be1f99cf054a5576b7c019"><div class="ttname"><a href="a01812.html#a8a6b834a28be1f99cf054a5576b7c019">Hairs::changePermanent</a></div><div class="ttdeci">virtual void changePermanent(float lasting)</div><div class="ttdoc">Changes the position during a permanent movement.</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00279">hairs.cpp:279</a></div></div>
<div class="ttc" id="aa01812_html_a2fab513a8f2de48bb69cb11ef3ac50aa"><div class="ttname"><a href="a01812.html#a2fab513a8f2de48bb69cb11ef3ac50aa">Hairs::Hairs</a></div><div class="ttdeci">Hairs(char *l)</div><div class="ttdoc">Constructor.</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00063">hairs.cpp:63</a></div></div>
<div class="ttc" id="aa02108_html_ab3dad0ae5630e692c0eaac557df598d0"><div class="ttname"><a href="a02108.html#ab3dad0ae5630e692c0eaac557df598d0">WObject::tokenize</a></div><div class="ttdeci">virtual char * tokenize(char *l)</div><div class="ttdoc">Tokenizes the line &lt;object ...</div><div class="ttdef"><b>Definition:</b> <a href="a00635_source.html#l00513">parse.cpp:513</a></div></div>
<div class="ttc" id="aa01792_html_aabc08091d3b0e1a3f25bfedf3229de33"><div class="ttname"><a href="a01792.html#aabc08091d3b0e1a3f25bfedf3229de33">Surface::draw</a></div><div class="ttdeci">void draw(HVertex *p0=NULL)</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00683">hairs.cpp:683</a></div></div>
<div class="ttc" id="aa00518_html_ab5e777563bbcf543fe91be06b4ccf215"><div class="ttname"><a href="a00518.html#ab5e777563bbcf543fe91be06b4ccf215">MAXL2</a></div><div class="ttdeci">#define MAXL2</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00038">hairs.hpp:38</a></div></div>
<div class="ttc" id="aa01796_html_a2612b153664c3aa7254548fbd840b610"><div class="ttname"><a href="a01796.html#a2612b153664c3aa7254548fbd840b610">Object::nbs</a></div><div class="ttdeci">int nbs</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00137">hairs.hpp:137</a></div></div>
<div class="ttc" id="aa01812_html_a5722735b7c37cbfc0560ef956433acaa"><div class="ttname"><a href="a01812.html#a5722735b7c37cbfc0560ef956433acaa">Hairs::funcs</a></div><div class="ttdeci">static void funcs()</div><div class="ttdoc">init funclist.</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00034">hairs.cpp:34</a></div></div>
<div class="ttc" id="aa01788_html_a58a554c146d7c978040203b01a3f7d56"><div class="ttname"><a href="a01788.html#a58a554c146d7c978040203b01a3f7d56">TriFace::normal</a></div><div class="ttdeci">void normal()</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00721">hairs.cpp:721</a></div></div>
<div class="ttc" id="aa02108_html_a5a950d20f18c8bf95fcfc1eda8025256"><div class="ttname"><a href="a02108.html#a5a950d20f18c8bf95fcfc1eda8025256">WObject::pos</a></div><div class="ttdeci">Pos pos</div><div class="ttdoc">position in the space.</div><div class="ttdef"><b>Definition:</b> <a href="a00866_source.html#l00142">wobject.hpp:142</a></div></div>
<div class="ttc" id="aa01812_html_ad67b5276fb5a3d62e4df324999e7554c"><div class="ttname"><a href="a01812.html#ad67b5276fb5a3d62e4df324999e7554c">Hairs::httpReader</a></div><div class="ttdeci">static void httpReader(void *alwo, class Http *http)</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00343">hairs.cpp:343</a></div></div>
<div class="ttc" id="aa00047_html_ae49fb908baa74033cb5c3f954c54f1b6"><div class="ttname"><a href="a00047.html#ae49fb908baa74033cb5c3f954c54f1b6">SWAPL</a></div><div class="ttdeci">#define SWAPL(x, n)</div><div class="ttdef"><b>Definition:</b> <a href="a00047_source.html#l00036">macros.hpp:36</a></div></div>
<div class="ttc" id="aa00518_html_a4f436de546f6e269715adff96ec34d82"><div class="ttname"><a href="a00518.html#a4f436de546f6e269715adff96ec34d82">HAIRLENGTH</a></div><div class="ttdeci">#define HAIRLENGTH</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00034">hairs.hpp:34</a></div></div>
<div class="ttc" id="aa01784_html_a0344b22e141951415e5c66d2142beae5a7608a9c6bfea3ca3e6d2257640bf6628"><div class="ttname"><a href="a01784.html#a0344b22e141951415e5c66d2142beae5a7608a9c6bfea3ca3e6d2257640bf6628">Material::Blend</a></div><div class="ttdeci">@ Blend</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00096">hairs.hpp:96</a></div></div>
<div class="ttc" id="aa01808_html_a542135d307b94e1cff88241b573d1571"><div class="ttname"><a href="a01808.html#a542135d307b94e1cff88241b573d1571">Hair::animate</a></div><div class="ttdeci">void animate(float dt, Vector3 depl)</div><div class="ttdoc">Animates hair.</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00195">hairs.cpp:195</a></div></div>
<div class="ttc" id="aa01768_html"><div class="ttname"><a href="a01768.html">Color4f</a></div><div class="ttdoc">Color4f class.</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00057">hairs.hpp:57</a></div></div>
<div class="ttc" id="aa01812_html"><div class="ttname"><a href="a01812.html">Hairs</a></div><div class="ttdoc">Hairs class.</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00200">hairs.hpp:200</a></div></div>
<div class="ttc" id="aa01484_html"><div class="ttname"><a href="a01484.html">Vector3</a></div><div class="ttdoc">Vector3 class.</div><div class="ttdef"><b>Definition:</b> <a href="a00137_source.html#l00028">vector3.hpp:28</a></div></div>
<div class="ttc" id="aa02108_html_a1e11950ab74f28010f4e1d7d371b2750"><div class="ttname"><a href="a02108.html#a1e11950ab74f28010f4e1d7d371b2750">WObject::enablePermanentMovement</a></div><div class="ttdeci">virtual void enablePermanentMovement()</div><div class="ttdoc">Enables permanent movement on an object.</div><div class="ttdef"><b>Definition:</b> <a href="a00593_source.html#l00287">move.cpp:287</a></div></div>
<div class="ttc" id="aa00515_html_abacd3907763713d5f65e036510e2cff7"><div class="ttname"><a href="a00515.html#abacd3907763713d5f65e036510e2cff7">getSTRING</a></div><div class="ttdeci">bool getSTRING(FILE *fp, char *s, int *l)</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00332">hairs.cpp:332</a></div></div>
<div class="ttc" id="aa01784_html"><div class="ttname"><a href="a01784.html">Material</a></div><div class="ttdoc">Material class.</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00084">hairs.hpp:84</a></div></div>
<div class="ttc" id="aa01796_html_a90bd2e691383db4c0d953e85af46656b"><div class="ttname"><a href="a01796.html#a90bd2e691383db4c0d953e85af46656b">Object::fc</a></div><div class="ttdeci">TriFace * fc</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00139">hairs.hpp:139</a></div></div>
<div class="ttc" id="aa00518_html_a3e2de907625cc41fb2d7bc2762bd7549"><div class="ttname"><a href="a00518.html#a3e2de907625cc41fb2d7bc2762bd7549">RANDX</a></div><div class="ttdeci">#define RANDX</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00044">hairs.hpp:44</a></div></div>
<div class="ttc" id="aa01784_html_a4dc22dce3e39672876a6634af6dbd114"><div class="ttname"><a href="a01784.html#a4dc22dce3e39672876a6634af6dbd114">Material::flag</a></div><div class="ttdeci">int flag</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00091">hairs.hpp:91</a></div></div>
<div class="ttc" id="aa01808_html_a2587b07c48f3aaabc64d0d2beb881f97"><div class="ttname"><a href="a01808.html#a2587b07c48f3aaabc64d0d2beb881f97">Hair::s</a></div><div class="ttdeci">Surface * s</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00180">hairs.hpp:180</a></div></div>
<div class="ttc" id="aa01796_html_aefc63529644b3564420415bb22e9563c"><div class="ttname"><a href="a01796.html#aefc63529644b3564420415bb22e9563c">Object::pt</a></div><div class="ttdeci">HVertex * pt</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00138">hairs.hpp:138</a></div></div>
<div class="ttc" id="aa00044_html_a34617f3ac0249ca877bddc57f6982401"><div class="ttname"><a href="a00044.html#a34617f3ac0249ca877bddc57f6982401">DBG_MOD</a></div><div class="ttdeci">#define DBG_MOD</div><div class="ttdef"><b>Definition:</b> <a href="a00044_source.html#l00040">log.hpp:40</a></div></div>
<div class="ttc" id="aa02100_html_ac2a61910f8f8882cf29aaceb05b2a776"><div class="ttname"><a href="a02100.html#ac2a61910f8f8882cf29aaceb05b2a776">Pos::y</a></div><div class="ttdeci">float y</div><div class="ttdoc">y absolute position.</div><div class="ttdef"><b>Definition:</b> <a href="a00866_source.html#l00093">wobject.hpp:93</a></div></div>
<div class="ttc" id="aa01784_html_a0344b22e141951415e5c66d2142beae5aaa69deeb90cac2d36d4bed35777c9863"><div class="ttname"><a href="a01784.html#a0344b22e141951415e5c66d2142beae5aaa69deeb90cac2d36d4bed35777c9863">Material::Lighting</a></div><div class="ttdeci">@ Lighting</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00095">hairs.hpp:95</a></div></div>
<div class="ttc" id="aa01812_html_a6ac41644982ec9a136dbd84d37e3e5ca"><div class="ttname"><a href="a01812.html#a6ac41644982ec9a136dbd84d37e3e5ca">Hairs::dlist</a></div><div class="ttdeci">int dlist</div><div class="ttdoc">display list</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00209">hairs.hpp:209</a></div></div>
<div class="ttc" id="aa00518_html_ac4041a19ac1fddefc2239437baecd8f5"><div class="ttname"><a href="a00518.html#ac4041a19ac1fddefc2239437baecd8f5">MAXL</a></div><div class="ttdeci">#define MAXL</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00037">hairs.hpp:37</a></div></div>
<div class="ttc" id="aa01804_html_a29abe137f505028304f14da8a1beac79"><div class="ttname"><a href="a01804.html#a29abe137f505028304f14da8a1beac79">Line::init</a></div><div class="ttdeci">void init(Vector3 p0, Vector3 dp)</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00135">hairs.cpp:135</a></div></div>
<div class="ttc" id="aa00866_html_a56ae4029eeabd22924990842aa7995ad"><div class="ttname"><a href="a00866.html#a56ae4029eeabd22924990842aa7995ad">UNSELECTABLE</a></div><div class="ttdeci">#define UNSELECTABLE</div><div class="ttdef"><b>Definition:</b> <a href="a00866_source.html#l00033">wobject.hpp:33</a></div></div>
<div class="ttc" id="aa00143_html"><div class="ttname"><a href="a00143.html">vreng.hpp</a></div></div>
<div class="ttc" id="aa00518_html_aa33237b8ed62658ffa1626eeecd566bc"><div class="ttname"><a href="a00518.html#aa33237b8ed62658ffa1626eeecd566bc">RANDY</a></div><div class="ttdeci">#define RANDY</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00045">hairs.hpp:45</a></div></div>
<div class="ttc" id="aa01784_html_a12d76356d4d322ac01f39cff93e7fc10"><div class="ttname"><a href="a01784.html#a12d76356d4d322ac01f39cff93e7fc10">Material::shininess</a></div><div class="ttdeci">int shininess</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00090">hairs.hpp:90</a></div></div>
<div class="ttc" id="aa00518_html_acf00dd36081957995cbe8d0d57e06708"><div class="ttname"><a href="a00518.html#acf00dd36081957995cbe8d0d57e06708">HAIRS_TYPE</a></div><div class="ttdeci">#define HAIRS_TYPE</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00024">hairs.hpp:24</a></div></div>
<div class="ttc" id="aa01812_html_a1d7fff5a831c62f495f80202ce487b71"><div class="ttname"><a href="a01812.html#a1d7fff5a831c62f495f80202ce487b71">Hairs::hair</a></div><div class="ttdeci">Hair * hair</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00203">hairs.hpp:203</a></div></div>
<div class="ttc" id="aa01800_html_a929e69ba993d5d970369d10b194fa162"><div class="ttname"><a href="a01800.html#a929e69ba993d5d970369d10b194fa162">Node::v</a></div><div class="ttdeci">Vector3 v</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00156">hairs.hpp:156</a></div></div>
<div class="ttc" id="aa01800_html_a5c3e83cf1c407633e4193b3493fd2b14"><div class="ttname"><a href="a01800.html#a5c3e83cf1c407633e4193b3493fd2b14">Node::put</a></div><div class="ttdeci">void put(int pdata)</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00155">hairs.cpp:155</a></div></div>
<div class="ttc" id="aa01780_html_a2670328f4966d09ceb0f4d434d1d9666"><div class="ttname"><a href="a01780.html#a2670328f4966d09ceb0f4d434d1d9666">HVertex::p</a></div><div class="ttdeci">Vector3 p</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00076">hairs.hpp:76</a></div></div>
<div class="ttc" id="aa00518_html_aab06a62de95a73a4511861a167d93313"><div class="ttname"><a href="a00518.html#aab06a62de95a73a4511861a167d93313">STIFF2</a></div><div class="ttdeci">#define STIFF2</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00040">hairs.hpp:40</a></div></div>
<div class="ttc" id="aa00518_html_a75a05dc6db649fc00b00ecb7e06b7366"><div class="ttname"><a href="a00518.html#a75a05dc6db649fc00b00ecb7e06b7366">STIFFNESS</a></div><div class="ttdeci">#define STIFFNESS</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00039">hairs.hpp:39</a></div></div>
<div class="ttc" id="aa01900_html_a2488922ccb36a6e227ae454d9d9b2a0c"><div class="ttname"><a href="a01900.html#a2488922ccb36a6e227ae454d9d9b2a0c">Parse::parseAttributes</a></div><div class="ttdeci">virtual char * parseAttributes(char *l, class WObject *po)</div><div class="ttdoc">Parses attribute=&quot;value&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="a00635_source.html#l00572">parse.cpp:572</a></div></div>
<div class="ttc" id="aa01796_html_a7733c75ab00848918a6afc221c65b48d"><div class="ttname"><a href="a01796.html#a7733c75ab00848918a6afc221c65b48d">Object::nbf</a></div><div class="ttdeci">int nbf</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00137">hairs.hpp:137</a></div></div>
<div class="ttc" id="aa00041_html_abd34ebec1a69975cf961f9a888d94d26"><div class="ttname"><a href="a00041.html#abd34ebec1a69975cf961f9a888d94d26">trace</a></div><div class="ttdeci">void trace(int dbgmask, const char *s,...)</div><div class="ttdef"><b>Definition:</b> <a href="a00041_source.html#l00077">log.cpp:77</a></div></div>
<div class="ttc" id="aa01812_html_a0ed9495296fd509dd92b168f3d4fca48"><div class="ttname"><a href="a01812.html#a0ed9495296fd509dd92b168f3d4fca48">Hairs::defaults</a></div><div class="ttdeci">virtual void defaults()</div><div class="ttdoc">Sets default values.</div><div class="ttdef"><b>Definition:</b> <a href="a00515_source.html#l00042">hairs.cpp:42</a></div></div>
<div class="ttc" id="aa02108_html_a67b7b4a6f2b5d87e8d04fde44f483abf"><div class="ttname"><a href="a02108.html#a67b7b4a6f2b5d87e8d04fde44f483abf">WObject::setRenderPrior</a></div><div class="ttdeci">virtual void setRenderPrior(uint8_t _prior)</div><div class="ttdoc">Sets render priority.</div><div class="ttdef"><b>Definition:</b> <a href="a00863_source.html#l00245">wobject.cpp:245</a></div></div>
<div class="ttc" id="aa01484_html_a7e2d3237b29a2f29d7b3d8b2934e35f2"><div class="ttname"><a href="a01484.html#a7e2d3237b29a2f29d7b3d8b2934e35f2">Vector3::x</a></div><div class="ttdeci">float x</div><div class="ttdef"><b>Definition:</b> <a href="a00137_source.html#l00032">vector3.hpp:32</a></div></div>
<div class="ttc" id="aa01484_html_a7cc926b7607a92ead837d3d0cfc7a46f"><div class="ttname"><a href="a01484.html#a7cc926b7607a92ead837d3d0cfc7a46f">Vector3::normalize</a></div><div class="ttdeci">float normalize()</div><div class="ttdoc">Normalizes this vector, and returns the scalar value used to normalize the vector.</div><div class="ttdef"><b>Definition:</b> <a href="a00137_source.html#l00171">vector3.hpp:171</a></div></div>
<div class="ttc" id="aa01784_html_a38c40dc9e7c0585f213b225210d67908"><div class="ttname"><a href="a01784.html#a38c40dc9e7c0585f213b225210d67908">Material::emission</a></div><div class="ttdeci">Color4f emission</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00089">hairs.hpp:89</a></div></div>
<div class="ttc" id="aa01484_html_af9b3548c3d8933ddcf7a060e2cb05fd0"><div class="ttname"><a href="a01484.html#af9b3548c3d8933ddcf7a060e2cb05fd0">Vector3::crossProduct</a></div><div class="ttdeci">void crossProduct(const Vector3 &amp;a, const Vector3 &amp;b)</div><div class="ttdoc">Calculates the cross product of &quot;a&quot; and &quot;b&quot;, then storing it in this vector.</div><div class="ttdef"><b>Definition:</b> <a href="a00137_source.html#l00151">vector3.hpp:151</a></div></div>
<div class="ttc" id="aa01800_html"><div class="ttname"><a href="a01800.html">Node</a></div><div class="ttdoc">Node class.</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00153">hairs.hpp:153</a></div></div>
<div class="ttc" id="aa00638_html_a07ef5da7baefb995252bba9a24326832"><div class="ttname"><a href="a00638.html#a07ef5da7baefb995252bba9a24326832">end_while_parse</a></div><div class="ttdeci">#define end_while_parse(l)</div><div class="ttdef"><b>Definition:</b> <a href="a00638_source.html#l00035">parse.hpp:35</a></div></div>
<div class="ttc" id="aa01900_html_a74cbc343311c02531a7e39f38865841b"><div class="ttname"><a href="a01900.html#a74cbc343311c02531a7e39f38865841b">Parse::parseUrl</a></div><div class="ttdeci">virtual char * parseUrl(char *ptok, char *url)</div><div class="ttdoc">Returns an url.</div><div class="ttdef"><b>Definition:</b> <a href="a00635_source.html#l00760">parse.cpp:760</a></div></div>
<div class="ttc" id="aa00518_html_a5c1a231e208926858fefae841e160853"><div class="ttname"><a href="a00518.html#a5c1a231e208926858fefae841e160853">rnd</a></div><div class="ttdeci">T rnd(T n)</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00051">hairs.hpp:51</a></div></div>
<div class="ttc" id="aa01484_html_a76760a5a3269745e146c059ef444f42f"><div class="ttname"><a href="a01484.html#a76760a5a3269745e146c059ef444f42f">Vector3::scale</a></div><div class="ttdeci">void scale(float s)</div><div class="ttdoc">Scale this vector by &quot;s&quot;.</div><div class="ttdef"><b>Definition:</b> <a href="a00137_source.html#l00190">vector3.hpp:190</a></div></div>
<div class="ttc" id="aa00518_html_a966b8ddbace046c7d1c3b3cacdbed52a"><div class="ttname"><a href="a00518.html#a966b8ddbace046c7d1c3b3cacdbed52a">RANDZ</a></div><div class="ttdeci">#define RANDZ</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00046">hairs.hpp:46</a></div></div>
<div class="ttc" id="aa01792_html_a52f45d05b60ad64ef135fc5853f04405"><div class="ttname"><a href="a01792.html#a52f45d05b60ad64ef135fc5853f04405">Surface::nbf</a></div><div class="ttdeci">int nbf</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00124">hairs.hpp:124</a></div></div>
<div class="ttc" id="aa00518_html_a93dc7578e99d1c96c69b89f0ae2a2d42"><div class="ttname"><a href="a00518.html#a93dc7578e99d1c96c69b89f0ae2a2d42">HAIRSIZE</a></div><div class="ttdeci">#define HAIRSIZE</div><div class="ttdef"><b>Definition:</b> <a href="a00518_source.html#l00033">hairs.hpp:33</a></div></div>
<div class="ttc" id="aa01792_html_aa409ccb88b301d735f37e580f114facb"><div class="ttname"><a href="a01792.html#aa409ccb88b301d735f37e580f114facb">Surface::ambient</a></div><div class="ttdeci">float ambient</div><div class="ttdoc">ambient</div><div class="ttdef"><b>Definition:</b> <a href="a01163_source.html#l00090">dxf.hpp:90</a></div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_546d7bebc886ddb13a4b826ba4e34140.html">wo</a></li><li class="navelem"><a class="el" href="a00515.html">hairs.cpp</a></li>
    <li class="footer">Generated on Fri Nov 6 2020 20:29:26 for VREng by <a href="http://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.8.20 </li>
  </ul>
</div>
</body>
</html>
